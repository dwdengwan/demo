webpackJsonp([34],{Lsel:function(e,t,a){"use strict";function o(e){a("b+wz")}Object.defineProperty(t,"__esModule",{value:!0});var c=a("lHA8"),n=a.n(c),i=a("j8VX"),r=(a("Fd2+"),{components:{headerTwo:i.a},data:function(){return{title:"账户多水表",isLoading:!1,scrollTop:0,checked:[],count:0,isShowBtn:!1,isShowPrice:!1,showData:{isShowUL:!1,isShowLink:!1,isShowBtn:!0,ctmName:"",accountNo:"",accountBalance:"",ctmNo:"",groupCode:""},needData:[],order:""}},mounted:function(){this.init()},methods:{onRefresh:function(){var e=this;setTimeout(function(){e.$toast("刷新成功"),e.isLoading=!1,e.init()},500)},scroll:function(e){parseInt(e.target.clientHeight)+Math.ceil(e.target.scrollTop)===parseInt(e.target.scrollHeight)||0==e.target.scrollTop&&e.stopPropagation(),this.$set(this,"scrollTop",e.target.scrollTop)},touchmove:function(e){0!==this.scrollTop&&e.stopPropagation()},init:function(){var e=this,t={data:{openId:localStorage.getItem("openId"),groupCode:localStorage.getItem("groupCode"),accountNo:localStorage.getItem("accNo")}};this.$api.fetch({params:t,apiUrl:"/myWater/accUserList"}).then(function(t){e.needData=t.list,e.showData.accountBalance=t.accountBalance,e.showData.accountNo=t.accountNo,e.showData.ctmName=t.ctmName,e.showData.ctmNo=t.ctmNo,e.showData.groupCode=e.$route.query.groupCode,localStorage.setItem("groupOpenId",t.groupOpenId)})},goBill:function(e){console.log(e),event.stopPropagation(),e.groupCode=this.$route.query.groupCode,localStorage.setItem("groupCode",e.groupCode),localStorage.setItem("userNo",e.userNo),this.$router.push({path:"/bill",query:e})},takeChage:function(e,t){event.stopPropagation();var a=this;if($("#checkbox"+e).is(":checked")?a.count+=parseFloat(t.arrears):a.count-=parseFloat(t.arrears),0==a.count)return $("#kr-list").css("height","100%"),void(a.isShowBtn=!1);for(var o=[],c=0;c<a.needData.length;c++)$("#checkbox"+c).is(":checked")?o[c]=1:o[c]=0;new n.a(o).has(1)?($("#kr-list").css("height","85%"),a.isShowBtn=!0):($("#kr-list").css("height","100%"),a.isShowBtn=!1)},pay:function(){this.isShowPrice=!0},comfirm:function(){var e=this;if(console.log(e.count),0==e.count){Toast.fail("充值金额不能为零！")}else{var t={data:{groupCode:localStorage.getItem("groupCode"),accountNo:localStorage.getItem("userNo"),payType:1,payMoney:Number(e.count),feeType:1,openId:localStorage.getItem("openId"),groupOpenId:localStorage.getItem("groupOpenId")}};this.$api.fetch({params:t,apiUrl:"/myWater/wechatPay"}).then(function(t){var a=t.appId,o=t.timeStamp,c=t.nonceStr,n=t.package,i=t.signType,r=t.paySign;e.order=t.order,e.onBridgeReady(a,o,c,n,i,r)})}},onBridgeReady:function(e,t,a,o,c,n){var i=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e,timeStamp:t,nonceStr:a,package:o,signType:c,paySign:n},function(e){"get_brand_wcpay_request:ok"==e.err_msg&&i.getOrder(i.order)})},getOrder:function(e){var t=this,a="",o={data:{order:e}};this.$api.fetch({params:o,apiUrl:"/myWater/payResultQuery"}).then(function(e){var o=e.payStatus;console.log(o),"1"==o?(a="交易失败！",Toast.fail(a)):"2"==o?(a="支付成功！",Toast.success(a),t.moduleAccess()):"3"!=o&&"4"!=o||(a="交易失败！",Toast.fail(a))})},moduleAccess:function(){var e=this,t={data:{groupCode:localStorage.getItem("groupCode"),openId:localStorage.getItem("openId"),moduleId:"13"}};this.$api.fetch({params:t,apiUrl:"/common/moduleVisitAdd"}).then(function(t){e.init()})},log:function(e){console.log(e||"log")}}}),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"more-account"},[a("page-content",[a("div",{staticClass:"content-padded"},[a("headerTwo",{attrs:{showData:e.showData,title:e.title}}),e._v(" "),a("div",{staticClass:"row kr-buttom",on:{touchmove:function(t){e.touchmove(t)},scroll:function(t){e.scroll(t)}}},[a("div",{staticClass:"col-100 kr-list",attrs:{id:"kr-list"}},[a("list",e._l(e.needData,function(t,o){return a("list-item",{key:t.code,attrs:{i:o},nativeOn:{click:function(a){e.goBill(t)}}},[a("div",{staticClass:"item-media"}),e._v(" "),a("div",{staticClass:"item-content"},[a("div",{staticClass:"item-title-row"},[a("div",{staticClass:"item-title"},[a("span",[e._v(e._s(t.userName))]),e._v("\n                      ("),a("span",[e._v(e._s(t.userNo))]),e._v(")\n                    ")]),e._v(" "),a("div",{staticClass:"item-title"},[a("span",[e._v("欠费金额")])])]),e._v(" "),a("div",{staticClass:"item-title-row"},[a("div",{staticClass:"item-title"},[a("span",{staticStyle:{"text-overflow":"ellipsis"}},[e._v(e._s(t.userAddress))])]),e._v(" "),a("div",{staticClass:"item-title"},[a("span",{staticClass:"total_num",staticStyle:{"font-size":"25px"}},[e._v(e._s(t.arrears)+"元")])])])]),e._v(" "),a("div",{staticClass:"kr-checkbox",on:{click:function(a){e.takeChage(o,t)}}},[a("input",{staticClass:"checkbox",attrs:{type:"checkbox",name:"name",value:"A",id:"checkbox"+o}})])])}))],1),e._v(" "),a("div",{staticClass:"kr-div"}),e._v(" "),e.isShowBtn?a("div",{staticClass:"row content-block"},[a("div",{staticClass:"col-100"},[a("m-button",{attrs:{size:"large"},nativeOn:{click:function(t){e.pay(t)}}},[e._v("确认支付（￥"+e._s(e.count)+"）")])],1)]):e._e(),e._v(" "),a("van-dialog",{attrs:{title:"确认支付金额￥"+e.count,"show-cancel-button":""},on:{confirm:function(t){e.comfirm()}},model:{value:e.isShowPrice,callback:function(t){e.isShowPrice=t},expression:"isShowPrice"}})],1)],1)])],1)},l=[],d={render:s,staticRenderFns:l},u=d,p=a("VU/8"),h=o,m=p(r,u,!1,h,"data-v-e9a37eea",null);t.default=m.exports},TZ1l:function(e,t,a){t=e.exports=a("FZ+f")(void 0),t.push([e.i,'.more-account[data-v-e9a37eea]{height:100%}.more-account .kr-buttom #kr-list .van-row[data-v-e9a37eea]{padding:1%;border-bottom:1px solid #888}.more-account .kr-buttom #kr-list .van-row .van-col[data-v-e9a37eea]{height:100%}.more-account .kr-buttom #kr-list .van-row .van-col .item-title-span[data-v-e9a37eea]{padding:3% 0 0;height:100%;width:100%}.more-account .kr-buttom #kr-list .van-row .van-col .item-title-span .kr-span[data-v-e9a37eea]{display:inline-block;height:100%;line-height:100%;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.more-account .kr-buttom #kr-list .van-row .van-col .item-title[data-v-e9a37eea]{font-weight:300}.more-account .kr-buttom #kr-list .van-row .kr-checkbox[data-v-e9a37eea]{padding:4% 0 0}.more-account .kr-buttom #kr-list .van-row .kr-checkbox input[type=checkbox]+label[data-v-e9a37eea]{display:block;width:30px;height:30px;border-radius:50%;cursor:pointer;border:1px solid red}.more-account .kr-buttom #kr-list .van-row .kr-checkbox input[type=checkbox]:checked+label[data-v-e9a37eea]:before{display:block;content:"\\2714";text-align:center;font-size:20px;color:red}.more-account .kr-buttom #kr-list .van-row .kr-checkbox input[type=checkbox][data-v-e9a37eea]{width:30px;height:30px}.more-account .page-content .content-padded[data-v-e9a37eea],.more-account .page-content[data-v-e9a37eea]{height:100%}.more-account .page-content .content-padded .kr-buttom[data-v-e9a37eea]{height:70%}.more-account .page-content .content-padded .kr-buttom .kr-list[data-v-e9a37eea]{height:85%;height:100%;overflow-y:auto;width:100%}.more-account .page-content .content-padded .kr-buttom .kr-list .item-content[data-v-e9a37eea]{margin-left:0;padding-right:0;width:88%}.more-account .page-content .content-padded .kr-buttom .kr-list .kr-checkbox[data-v-e9a37eea]{width:6%;padding:10% 0}.more-account .page-content .content-padded .kr-buttom .kr-list .kr-checkbox .checkbox[data-v-e9a37eea]{width:100%;height:100%;border-radius:50%;display:inline-block}.more-account .page-content .content-padded .kr-buttom .content-block[data-v-e9a37eea]{height:13%;padding:2% 0 0 4%}.more-account .pay_box[data-v-e9a37eea]{padding:1%;text-align:right;margin-top:142%}.more-account .pay_box a[data-v-e9a37eea]{display:inline-block;color:#1e1f6a;font-weight:bolder}.more-account .pay_box a .button[data-v-e9a37eea]{border-radius:.2rem!important;font-weight:600}.more-account .icon[data-v-e9a37eea]{width:38px;height:38px;position:absolute;right:.5rem}.more-account .content-padded[data-v-e9a37eea]{margin:0}.more-account .list .item-subtitle[data-v-e9a37eea]{font-size:14px}.more-account .img_content[data-v-e9a37eea]{height:10rem;width:100%;background:url('+a("vR/c")+') no-repeat;background-size:100% 100%;margin-left:0}.more-account .total_num[data-v-e9a37eea]{font-weight:bolder;font-size:20px}.more-account .content-block .col-100[data-v-e9a37eea]{text-align:center}.more-account .content-block a[data-v-e9a37eea]{height:2rem;line-height:2rem;width:60%}.more-account .list[data-v-e9a37eea]{margin:0}.more-account .content-block a[data-v-e9a37eea]{font-size:.9rem;height:2.7rem;line-height:2.7rem;width:92%;display:inline-block;border-radius:4px;background:#479eff}.more-account .item-title-row[data-v-e9a37eea]{font-size:15px;width:95%}.more-account .col-100 .user-card[data-v-e9a37eea]{border-radius:10px;padding-top:3px;font-weight:100}.more-account .col-100 .user-card[data-v-e9a37eea]:after{display:block;width:100%;height:100%;content:""}.more-account .col-100 .user-card .card-header .img[data-v-e9a37eea]{float:left}.more-account .col-100 .user-card .card-header a[data-v-e9a37eea]{float:right;color:#fff}.more-account .col-100 .user-card .card-header a b[data-v-e9a37eea]{font-size:16px;font-weight:400;text-decoration:underline}.more-account .col-100 .user-card .card-content[data-v-e9a37eea]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.more-account .col-100 .user-card .card-content .kr-ul[data-v-e9a37eea]{margin-top:6%;width:100%}.more-account .col-100 .user-card .card-content .kr-ul li[data-v-e9a37eea]{color:#fff;padding:1.5% 1%;font-weight:300;font-size:14px}.more-account .col-100 .user-card .card-content .kr-ul li b[data-v-e9a37eea]{font-weight:300}.more-account .col-100 .user-card .card-content .kr-ul li a[data-v-e9a37eea]{display:inline-block;color:#3193f6;float:right}.more-account .col-100 .money-select[data-v-e9a37eea]{margin:.5rem}.more-account .col-100 .money-select[data-v-e9a37eea]:after{content:"020";display:block;height:0;clear:both;visibility:hidden}.more-account .col-100 .money-select li[data-v-e9a37eea]{float:left;width:27%;height:2rem;line-height:2rem;text-align:center;margin:3%;background:#e7e7e7;border-radius:6px}.more-account .col-100 p[data-v-e9a37eea]{text-align:center;margin:.5rem}.more-account .col-100 h3[data-v-e9a37eea]{padding:.5rem}',""])},"b+wz":function(e,t,a){var o=a("TZ1l");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("po5z")("6e53d27a",o,!0)}});
//# sourceMappingURL=34.8e9f7421f2ac64131130.js.map