{"version":3,"sources":["webpack:///static/js/42.e7e695be9751b896c212.js","webpack:///./src/project/mywater/service/visitPre.vue?c4ae","webpack:///./src/project/mywater/service/visitPre.vue?b090","webpack:///./src/project/mywater/service/visitPre.vue","webpack:///src/project/mywater/service/visitPre.vue","webpack:///./src/project/mywater/service/visitPre.vue?43d8"],"names":["webpackJsonp","1+BD","module","exports","__webpack_require__","undefined","push","i","FWO3","content","locals","ukIi","__webpack_exports__","injectStyle","ssrContext","Object","defineProperty","value","myHeader","headerThree","visitPre","components","data","message","title","span1","span2","isShow","isLoading","scrollTop","loading","finished","groupCode","relationShow","showAddress","areaNum","areaList","userlist","groupName","userbindCompany","needData","filters","dealUser","length","slice","mounted","$","html","this","getArrList","methods","scroll","e","parseInt","target","clientHeight","Math","ceil","scrollHeight","stopPropagation","$set","touchmove","onRefresh","_this2","setTimeout","$toast","getArrList2","onLoad","_this3","console","log","tableData","showAddressChuang","sure","val","code","name","replace","getNeedData","exit","onChange","_this","params","openId","localStorage","getItem","$api","fetch","apiUrl","then","res","province_list","provinceMap","city_list","cityMap","county_list","areaMap","JSON","parse","sessionStorage","codeNum","key","item","getBindData","bindData","bwcList","getGeolocation1","getSpaceNum","longitude","latitude","groupArea","map","AMap","Map","resizeEnable","plugin","geolocation","Geolocation","enableHighAccuracy","timeout","buttonPosition","buttonOffset","Pixel","zoomToAccuracy","addControl","getCurrentPosition","status","result","position","lng","lat","goWay","url","window","location","href","render","_vm","_h","$createElement","_c","_self","staticClass","on","refresh","model","callback","$$v","expression","attrs","label","readonly","left-icon","right-icon","placeholder","click","_v","$event","_e","_l","_s","src","alt","time","icon","style","height","area-list","confirm","cancel","change","staticRenderFns","esExports","service_visitPre","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/42.e7e695be9751b896c212.js","sourcesContent":["webpackJsonp([42],{\n\n/***/ \"1+BD\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".visit-pre .van-cell--large[data-v-077b03d9]{border-bottom:1px solid #666}.visit-pre .van-search[data-v-077b03d9]{padding:5px 12px;margin:0 10px;border-radius:3px}.visit-pre .van-field__control[data-v-077b03d9]{color:#fff!important}.visit-pre .search_box[data-v-077b03d9]{width:100%;height:3rem;background:#3649b3}.visit-pre .search_box .address_content .address[data-v-077b03d9]{background:#3649b3;border:none;padding:5% 1%}.visit-pre .search_box .address_content .address .van-field__control[data-v-077b03d9]{color:#fff!important}.visit-pre .content-padded[data-v-077b03d9]{margin:0}.visit-pre .content-padded .kr-body[data-v-077b03d9]{height:90%;overflow-y:auto;padding:15px 10px 10px}.visit-pre .content-padded .kr-body .kr-div-parent .van-cell[data-v-077b03d9]{margin-bottom:10px;-webkit-box-shadow:0 1px 9px -1px #888;box-shadow:0 1px 9px -1px #888;border-radius:10px}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt[data-v-077b03d9]{-webkit-box-shadow:1px 1px 5px 1px #888;box-shadow:1px 1px 5px 1px #888;padding:15px 10px;border-radius:15px;margin-bottom:10px;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left[data-v-077b03d9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:70%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-top .yh-left-title[data-v-077b03d9]{font-size:.8rem;font-weight:700}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-middle .yh-left-title[data-v-077b03d9]{font-size:.8rem}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-bottom .yh-bottom-div[data-v-077b03d9]{display:inline-block;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-bottom .yh-bottom-div span[data-v-077b03d9]{font-size:.6rem;color:#7d7d7d;margin-left:.5rem}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-bottom .yh-bottom-div img[data-v-077b03d9]{width:6%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-bottom .yh-bottom-div .img-yj[data-v-077b03d9]{width:30%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-right[data-v-077b03d9]{width:30%;text-align:right;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-right img[data-v-077b03d9]{width:100%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-title[data-v-077b03d9]{margin-left:.5rem;border:0;font-size:1rem;font-weight:700}.visit-pre .content-padded .kr-body .kr-div-parent .yh-bottom[data-v-077b03d9]{padding:15px 10px;border-radius:15px;margin-bottom:10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:55%}.visit-pre .content-padded .kr-body .kr-div-parent .yh-bottom .yh-title[data-v-077b03d9]{font-size:.8rem;color:#9f9f9f}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"FWO3\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"1+BD\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"po5z\")(\"09993591\", content, true);\n\n/***/ }),\n\n/***/ \"ukIi\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/comments/myHeader.vue + 2 modules\nvar myHeader = __webpack_require__(\"rYnR\");\n\n// EXTERNAL MODULE: ./src/comments/headerThree.vue + 2 modules\nvar headerThree = __webpack_require__(\"Gs2z\");\n\n// EXTERNAL MODULE: ./node_modules/vant/es/index.js + 137 modules\nvar es = __webpack_require__(\"Fd2+\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/project/mywater/service/visitPre.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var visitPre = ({\n  components: {\n    myHeader: myHeader[\"default\"], headerThree: headerThree[\"a\" /* default */]\n  },\n  data: function data() {\n    return {\n      message: {\n        title: \"参观预约活动\",\n        span1: \"参与参观活动\",\n        span2: \"共同监督与见证水司的建设\",\n        isShow: ''\n      },\n      title: '参观预约活动',\n\n      //上拉刷新\n      isLoading: false,\n      scrollTop: 0, //滚动条隔顶部的距离\n      //下拉加载\n      loading: false,\n      finished: false,\n\n      groupCode: null,\n      relationShow: false,\n      //  地址三级联动数据\n      //   地址弹窗标识\n      showAddress: false,\n      // 当前选中的省市区code\n      areaNum: \"01013\",\n      // 省市区列表\n      areaList: {},\n      userlist: {},\n      groupName: \"\",\n      userbindCompany: {},\n      needData: []\n    };\n  },\n\n  filters: {\n    dealUser: function dealUser(value) {\n      if (value.length > 3) return value.slice(0, 3) + '...';else return value;\n    }\n  },\n  mounted: function mounted() {\n    $('#myTitle').html('参观预约');\n    this.getArrList();\n  },\n\n  methods: {\n    scroll: function scroll(e) {\n      if (parseInt(e.target.clientHeight) + Math.ceil(e.target.scrollTop) === parseInt(e.target.scrollHeight)) {\n        // console.log(\"到底\")\n      } else if (e.target.scrollTop == 0) {\n        // console.log(\"到顶\")\n        e.stopPropagation();\n      }\n      this.$set(this, 'scrollTop', e.target.scrollTop);\n    },\n    touchmove: function touchmove(e) {\n      if (this.scrollTop !== 0) {\n        e.stopPropagation(); //阻止冒泡\n      }\n    },\n    onRefresh: function onRefresh() {\n      var _this2 = this;\n\n      //上拉刷新\n      setTimeout(function () {\n        _this2.$toast('刷新成功');\n        _this2.isLoading = false;\n        _this2.getArrList2();\n      }, 500);\n    },\n    onLoad: function onLoad(e) {\n      var _this3 = this;\n\n      //下拉加载更多\n      // e.stopPropagation()\n      // 异步更新数据\n      setTimeout(function () {\n        console.log('1111');\n        // 加载状态结束\n        _this3.loading = false;\n\n        // 数据全部加载完成\n        if (_this3.tableData.length) {\n          _this3.finished = true;\n        }\n      }, 500);\n    },\n\n    // 点击展示地址弹窗\n    showAddressChuang: function showAddressChuang() {\n      this.relationShow = true;\n    },\n\n    // 三级联动点击确定按钮事件\n    sure: function sure(val) {\n      var keyCode = '';\n      var keyName = '';\n      if (typeof val[2] == \"undefined\" || val[2].code == '') {\n        keyCode = val[1].code;\n        this.groupCode = val[1].code.slice(2);\n        this.groupName = val[0].name + val[1].name;\n      } else {\n        keyCode = val[2].code;\n        this.groupCode = val[2].code.slice(4);\n        this.groupName = val[0].name + val[1].name + val[2].name;\n      }\n      this.groupName = this.groupName.replace('*', '');\n      keyName = this.groupName;\n      this.getNeedData(this.groupCode);\n      this.relationShow = false;\n    },\n\n    // 三级联动点击取消按钮事件\n    exit: function exit() {\n      this.relationShow = false;\n    },\n\n    // 三级联动状态改变事件\n    onChange: function onChange() {},\n    getArrList: function getArrList() {\n      var _this = this;\n      var params = {\n        \"data\": {\n          openId: localStorage.getItem('openId')\n        }\n      };\n      _this.$api.fetch({\n        params: params, //参数\n        apiUrl: '/common/wAreaTree' //接口地址\n      }).then(function (res) {\n        _this.areaList.province_list = res.provinceMap; //省\n        _this.areaList.city_list = res.cityMap; //市\n        _this.areaList.county_list = res.areaMap; //区\n\n        _this.userbindCompany = JSON.parse(localStorage.getItem('bwcList'));\n        //设定默认值\n        if (_this.userbindCompany[0] && sessionStorage.getItem('groupKeyCode') == null) {\n          var codeNum = _this.userbindCompany[0].groupCode;\n          _this.groupName = _this.userbindCompany[0].groupName;\n          for (var key in _this.areaList.county_list) {\n            //区\n            var groupCode = key.slice(4);\n            if (codeNum == groupCode) {\n              _this.areaNum = key;\n            } else {\n              for (var item in _this.areaList.city_list) {\n                //市\n                var code = item.slice(2);\n                if (codeNum == code) {\n                  _this.areaNum = item;\n                }\n              }\n            }\n          }\n          _this.getNeedData(codeNum);\n        } else {\n          //默认获取第一个\n          _this.groupCode = sessionStorage.getItem('groupKeyCode');\n          _this.groupName = sessionStorage.getItem('groupKeyName');\n          _this.areaNum = sessionStorage.getItem('keyCode');\n          _this.getNeedData(_this.groupCode);\n        }\n        _this.getBindData();\n      });\n    },\n\n\n    // 获取绑定水司\n    getBindData: function getBindData() {\n      var _this = this;\n      var params = {\n        \"data\": {}\n      };\n      _this.$api.fetch({\n        params: params, //参数\n        apiUrl: '/common/getUserInfo' //接口地址\n      }).then(function (res) {\n\n        var bindData = res.bwcList;\n        console.log(bindData);\n        if (bindData.length > 0) {\n          _this.groupCode = bindData[0].groupCode;\n          _this.groupName = bindData[0].groupName;\n          _this.getNeedData(_this.groupCode);\n        } else {\n          _this.getGeolocation1();\n        }\n      });\n    },\n\n    // 获取离当前位置最近的水司\n    getSpaceNum: function getSpaceNum(longitude, latitude) {\n      var _this = this;\n      var params = {\n        \"data\": {\n          'longitude': longitude,\n          'latitude': latitude\n        }\n      };\n      _this.$api.fetch({\n        params: params, //参数\n        apiUrl: '/common/getShortestComp' //接口地址\n      }).then(function (res) {\n        _this.groupCode = res.groupCode;\n        _this.groupName = res.groupArea;\n        _this.getNeedData(_this.groupCode);\n      });\n    },\n\n    // 获取当前位置经纬度\n    getGeolocation1: function getGeolocation1() {\n      var _this = this;\n      var map = new AMap.Map('container', {\n        resizeEnable: true\n      });\n      AMap.plugin('AMap.Geolocation', function () {\n        var geolocation = new AMap.Geolocation({\n          enableHighAccuracy: true, //是否使用高精度定位，默认:true\n          timeout: 10000, //超过10秒后停止定位，默认：5s\n          buttonPosition: 'RB', //定位按钮的停靠位置\n          buttonOffset: new AMap.Pixel(10, 20), //定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)\n          zoomToAccuracy: true //定位成功后是否自动调整地图视野到定位点\n\n        });\n        map.addControl(geolocation);\n        geolocation.getCurrentPosition(function (status, result) {\n          if (status == 'complete') {\n            _this.getSpaceNum(result.position.lng, result.position.lat);\n          } else {\n            // _this.onError(result)\n          }\n        });\n      });\n    },\n    getNeedData: function getNeedData(groupCode) {\n      var _this = this;\n      var params = {\n        \"data\": {\n          groupCode: groupCode\n        }\n      };\n      _this.$api.fetch({\n        params: params, //参数\n        apiUrl: '/moreFun/activityList' //接口地址\n      }).then(function (res) {\n        _this.needData = res;\n      });\n    },\n    goWay: function goWay(item) {\n      console.log(item.url);\n      // window.open(item.url);\n      window.location.href = item.url;\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-077b03d9\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/project/mywater/service/visitPre.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"visit-pre\"},[_c('page-content',[_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('div',{staticClass:\"content-padded\"},[_c('div',{staticClass:\"search_box\"},[_c('div',{staticClass:\"address_content\"},[_c('van-field',{staticClass:\"address\",attrs:{\"label\":\"所属地区\",\"readonly\":\"\",\"left-icon\":\"location-o\",\"right-icon\":\"arrow\",\"placeholder\":\"请选择地区\"},on:{\"click\":_vm.showAddressChuang},model:{value:(_vm.groupName),callback:function ($$v) {_vm.groupName=$$v},expression:\"groupName\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"kr-body\",on:{\"touchmove\":function($event){_vm.touchmove($event)},\"scroll\":function($event){_vm.scroll($event)}}},[_c('div',{staticClass:\"kr-div-parent\"},[(_vm.needData.length ==0)?_c('div',{staticClass:\"yh-bottom\"},[_c('div',{staticClass:\"yh-title\"},[_vm._v(\"暂无参观预约活动\")])]):_vm._e(),_vm._v(\" \"),(_vm.needData.length !== 0)?_c('div',_vm._l((_vm.needData),function(item,i){return _c('div',{key:i,staticClass:\"kr-containt\",on:{\"click\":function($event){_vm.goWay(item)}}},[_c('div',{staticClass:\"yh-left\"},[_c('div',{staticClass:\"yh-left-top\"},[_c('span',{staticClass:\"yh-left-title\"},[_vm._v(_vm._s(item.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"yh-left-middle\"},[_vm._v(\"    \\n                    \"),_c('span',{staticClass:\"yh-left-title\"},[_vm._v(_vm._s(item.content))])]),_vm._v(\" \"),_c('div',{staticClass:\"yh-left-bottom\"},[_c('div',{staticClass:\"yh-bottom-div\"},[_c('img',{attrs:{\"src\":__webpack_require__(\"FCa7\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.time))])])])]),_vm._v(\" \"),_c('div',{staticClass:\"yh-right\"},[_c('img',{attrs:{\"src\":item.icon,\"alt\":\"\"}})])])})):_vm._e()])])])])],1),_vm._v(\" \"),_c('van-popup',{style:({ height: '40%' }),attrs:{\"position\":\"bottom\"},model:{value:(_vm.relationShow),callback:function ($$v) {_vm.relationShow=$$v},expression:\"relationShow\"}},[_c('van-area',{attrs:{\"area-list\":_vm.areaList,\"value\":_vm.areaNum},on:{\"confirm\":_vm.sure,\"cancel\":_vm.exit,\"change\":_vm.onChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var service_visitPre = (esExports);\n// CONCATENATED MODULE: ./src/project/mywater/service/visitPre.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"FWO3\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-077b03d9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  visitPre,\n  service_visitPre,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var mywater_service_visitPre = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/42.e7e695be9751b896c212.js","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".visit-pre .van-cell--large[data-v-077b03d9]{border-bottom:1px solid #666}.visit-pre .van-search[data-v-077b03d9]{padding:5px 12px;margin:0 10px;border-radius:3px}.visit-pre .van-field__control[data-v-077b03d9]{color:#fff!important}.visit-pre .search_box[data-v-077b03d9]{width:100%;height:3rem;background:#3649b3}.visit-pre .search_box .address_content .address[data-v-077b03d9]{background:#3649b3;border:none;padding:5% 1%}.visit-pre .search_box .address_content .address .van-field__control[data-v-077b03d9]{color:#fff!important}.visit-pre .content-padded[data-v-077b03d9]{margin:0}.visit-pre .content-padded .kr-body[data-v-077b03d9]{height:90%;overflow-y:auto;padding:15px 10px 10px}.visit-pre .content-padded .kr-body .kr-div-parent .van-cell[data-v-077b03d9]{margin-bottom:10px;-webkit-box-shadow:0 1px 9px -1px #888;box-shadow:0 1px 9px -1px #888;border-radius:10px}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt[data-v-077b03d9]{-webkit-box-shadow:1px 1px 5px 1px #888;box-shadow:1px 1px 5px 1px #888;padding:15px 10px;border-radius:15px;margin-bottom:10px;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left[data-v-077b03d9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:70%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-top .yh-left-title[data-v-077b03d9]{font-size:.8rem;font-weight:700}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-middle .yh-left-title[data-v-077b03d9]{font-size:.8rem}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-bottom .yh-bottom-div[data-v-077b03d9]{display:inline-block;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-bottom .yh-bottom-div span[data-v-077b03d9]{font-size:.6rem;color:#7d7d7d;margin-left:.5rem}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-bottom .yh-bottom-div img[data-v-077b03d9]{width:6%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-left .yh-left-bottom .yh-bottom-div .img-yj[data-v-077b03d9]{width:30%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-right[data-v-077b03d9]{width:30%;text-align:right;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-right img[data-v-077b03d9]{width:100%}.visit-pre .content-padded .kr-body .kr-div-parent .kr-containt .yh-title[data-v-077b03d9]{margin-left:.5rem;border:0;font-size:1rem;font-weight:700}.visit-pre .content-padded .kr-body .kr-div-parent .yh-bottom[data-v-077b03d9]{padding:15px 10px;border-radius:15px;margin-bottom:10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:55%}.visit-pre .content-padded .kr-body .kr-div-parent .yh-bottom .yh-title[data-v-077b03d9]{font-size:.8rem;color:#9f9f9f}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-077b03d9\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/project/mywater/service/visitPre.vue\n// module id = 1+BD\n// module chunks = 42","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?minimize!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-077b03d9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./visitPre.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-loader/node_modules/vue-style-loader/lib/addStylesClient.js\")(\"09993591\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-077b03d9\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/project/mywater/service/visitPre.vue\n// module id = FWO3\n// module chunks = 42","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-077b03d9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./visitPre.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./visitPre.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-077b03d9\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./visitPre.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-077b03d9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/project/mywater/service/visitPre.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"visit-pre\">\r\n    <!-- <page-header>\r\n      <header-link :left=\"true\" :edge=\"true\" v-back-link>\r\n        <icon icon=\"back\"></icon>返回\r\n      </header-link>\r\n      <header-title>参观预约</header-title>\r\n    </page-header> -->\r\n    <page-content>\r\n      <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\r\n        <div class=\"content-padded\">\r\n          <!-- <myHeader :title=\"title\"></myHeader> -->\r\n          <!-- <headerThree :message = 'message'></headerThree> -->\r\n          <div class=\"search_box\">\r\n            <div class=\"address_content\">\r\n              <van-field class=\"address\" label=\"所属地区\" v-model=\"groupName\" readonly @click=\"showAddressChuang\" left-icon=\"location-o\" right-icon=\"arrow\" placeholder=\"请选择地区\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"kr-body\" @touchmove=\"touchmove($event)\" @scroll=\"scroll($event)\">\r\n\r\n            <div class=\"kr-div-parent\">\r\n              <!-- <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad($event)\">\r\n                <van-cell class=\"kr-containt\" v-for=\"item in tableData\" :key=\"item.busiId + item.userNo\" @click=\"goDetail(item)\"> -->\r\n              <div class=\"yh-bottom\" v-if=\"needData.length ==0\">\r\n                <div class=\"yh-title\">暂无参观预约活动</div>\r\n              </div>\r\n              <div v-if=\"needData.length !== 0\">\r\n                <div class=\"kr-containt\" v-for=\"(item,i) in needData\" :key='i' @click=\"goWay(item)\">\r\n                  <div class=\"yh-left\">\r\n                    <div class=\"yh-left-top\">\r\n                      <span class=\"yh-left-title\">{{item.name}}</span>\r\n                    </div>\r\n                    <div class=\"yh-left-middle\">&nbsp;&nbsp;&nbsp;&nbsp;\r\n                      <span class=\"yh-left-title\">{{item.content}}</span>\r\n                    </div>\r\n                    <div class=\"yh-left-bottom\">\r\n                      <div class=\"yh-bottom-div\">\r\n                        <img src=\"../../../../static/img/shijian.png\" alt=\"\">\r\n                        <span>{{item.time}}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"yh-right\">\r\n                    <img :src=\"item.icon\" alt=\"\">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- </van-cell>\r\n              </van-list> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </van-pull-refresh>\r\n    </page-content>\r\n    <!-- 水司下拉数据 -->\r\n    <van-popup position=\"bottom\" :style=\"{ height: '40%' }\" v-model=\"relationShow\">\r\n      <van-area :area-list=\"areaList\" :value=\"areaNum\" @confirm=\"sure\" @cancel=\"exit\" @change=\"onChange\" />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport myHeader from '@/comments/myHeader'\r\nimport headerThree from '@/comments/headerThree';\r\nimport { Toast, PullRefresh, Dialog } from 'vant';\r\nexport default {\r\n  components: {\r\n    myHeader, headerThree\r\n  },\r\n  data() {\r\n    return {\r\n      message: {\r\n        title: \"参观预约活动\",\r\n        span1: \"参与参观活动\",\r\n        span2: \"共同监督与见证水司的建设\",\r\n        isShow: '',\r\n      },\r\n      title: '参观预约活动',\r\n\r\n      //上拉刷新\r\n      isLoading: false,\r\n      scrollTop: 0,//滚动条隔顶部的距离\r\n      //下拉加载\r\n      loading: false,\r\n      finished: false,\r\n\r\n      groupCode: null,\r\n      relationShow: false,\r\n      //  地址三级联动数据\r\n      //   地址弹窗标识\r\n      showAddress: false,\r\n      // 当前选中的省市区code\r\n      areaNum: \"01013\",\r\n      // 省市区列表\r\n      areaList: {\r\n      },\r\n      userlist: {},\r\n      groupName: \"\",\r\n      userbindCompany: {},\r\n      needData: [],\r\n    }\r\n  },\r\n  filters: {\r\n    dealUser: function (value) {\r\n      if (value.length > 3)\r\n        return value.slice(0, 3) + '...'\r\n      else\r\n        return value\r\n    }\r\n  },\r\n  mounted() {\r\n    $('#myTitle').html('参观预约')\r\n    this.getArrList();\r\n  },\r\n  methods: {\r\n    scroll(e) {\r\n      if ((parseInt(e.target.clientHeight) + Math.ceil(e.target.scrollTop)) === parseInt(e.target.scrollHeight)) {\r\n        // console.log(\"到底\")\r\n      } else if (e.target.scrollTop == 0) {\r\n        // console.log(\"到顶\")\r\n        e.stopPropagation()\r\n      }\r\n      this.$set(this, 'scrollTop', e.target.scrollTop)\r\n    },\r\n    touchmove(e) {\r\n      if (this.scrollTop !== 0) {\r\n        e.stopPropagation()//阻止冒泡\r\n      }\r\n    },\r\n    onRefresh() {//上拉刷新\r\n      setTimeout(() => {\r\n        this.$toast('刷新成功');\r\n        this.isLoading = false;\r\n        this.getArrList2()\r\n      }, 500);\r\n    },\r\n    onLoad(e) {//下拉加载更多\r\n      // e.stopPropagation()\r\n      // 异步更新数据\r\n      setTimeout(() => {\r\n        console.log('1111');\r\n        // 加载状态结束\r\n        this.loading = false;\r\n\r\n        // 数据全部加载完成\r\n        if (this.tableData.length) {\r\n          this.finished = true;\r\n        }\r\n\r\n      }, 500);\r\n    },\r\n    // 点击展示地址弹窗\r\n    showAddressChuang() {\r\n      this.relationShow = true\r\n    },\r\n    // 三级联动点击确定按钮事件\r\n    sure(val) {\r\n      let keyCode = '';\r\n      let keyName = '';\r\n      if (typeof (val[2]) == \"undefined\" || val[2].code == '') {\r\n        keyCode = val[1].code;\r\n        this.groupCode = val[1].code.slice(2)\r\n        this.groupName = val[0].name + val[1].name\r\n      } else {\r\n        keyCode = val[2].code;\r\n        this.groupCode = val[2].code.slice(4);\r\n        this.groupName = val[0].name + val[1].name + val[2].name\r\n      }\r\n      this.groupName = this.groupName.replace('*', '')\r\n      keyName = this.groupName;\r\n      this.getNeedData(this.groupCode)\r\n      this.relationShow = false\r\n    },\r\n    // 三级联动点击取消按钮事件\r\n    exit() {\r\n      this.relationShow = false\r\n    },\r\n    // 三级联动状态改变事件\r\n    onChange() { },\r\n    getArrList() {\r\n      let _this = this\r\n      let params = {\r\n        \"data\": {\r\n          openId: localStorage.getItem('openId')\r\n        },\r\n      }\r\n      _this.$api.fetch({\r\n        params, //参数\r\n        apiUrl: '/common/wAreaTree', //接口地址\r\n      }).then(res => {\r\n        _this.areaList.province_list = res.provinceMap; //省\r\n        _this.areaList.city_list = res.cityMap; //市\r\n        _this.areaList.county_list = res.areaMap; //区\r\n\r\n        _this.userbindCompany = JSON.parse(localStorage.getItem('bwcList'))\r\n        //设定默认值\r\n        if (_this.userbindCompany[0] && sessionStorage.getItem('groupKeyCode') == null) {\r\n          let codeNum = _this.userbindCompany[0].groupCode\r\n          _this.groupName = _this.userbindCompany[0].groupName;\r\n          for (const key in _this.areaList.county_list) {//区\r\n            let groupCode = key.slice(4)\r\n            if (codeNum == groupCode) {\r\n              _this.areaNum = key;\r\n            } else {\r\n              for (const item in _this.areaList.city_list) {//市\r\n                let code = item.slice(2)\r\n                if (codeNum == code) {\r\n                  _this.areaNum = item;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          _this.getNeedData(codeNum)\r\n        } else {\r\n          //默认获取第一个\r\n          _this.groupCode = sessionStorage.getItem('groupKeyCode')\r\n          _this.groupName = sessionStorage.getItem('groupKeyName');\r\n          _this.areaNum = sessionStorage.getItem('keyCode');\r\n          _this.getNeedData(_this.groupCode)\r\n        }\r\n        _this.getBindData()\r\n      })\r\n    },\r\n\r\n    // 获取绑定水司\r\n    getBindData() {\r\n      let _this = this\r\n      let params = {\r\n        \"data\": {},\r\n      }\r\n      _this.$api.fetch({\r\n        params,//参数\r\n        apiUrl: '/common/getUserInfo',//接口地址\r\n      }).then(res => {\r\n\r\n        let bindData = res.bwcList\r\n        console.log(bindData);\r\n        if (bindData.length > 0) {\r\n          _this.groupCode = bindData[0].groupCode\r\n          _this.groupName = bindData[0].groupName\r\n          _this.getNeedData(_this.groupCode)\r\n        } else {\r\n          _this.getGeolocation1()\r\n        }\r\n      })\r\n    },\r\n    // 获取离当前位置最近的水司\r\n    getSpaceNum(longitude, latitude) {\r\n      let _this = this\r\n      let params = {\r\n        \"data\": {\r\n          'longitude': longitude,\r\n          'latitude': latitude,\r\n        },\r\n      }\r\n      _this.$api.fetch({\r\n        params,//参数\r\n        apiUrl: '/common/getShortestComp',//接口地址\r\n      }).then(res => {\r\n        _this.groupCode = res.groupCode\r\n        _this.groupName = res.groupArea\r\n        _this.getNeedData(_this.groupCode)\r\n      })\r\n    },\r\n    // 获取当前位置经纬度\r\n    getGeolocation1() {\r\n      let _this = this\r\n      var map = new AMap.Map('container', {\r\n        resizeEnable: true\r\n      });\r\n      AMap.plugin('AMap.Geolocation', function () {\r\n        var geolocation = new AMap.Geolocation({\r\n          enableHighAccuracy: true,//是否使用高精度定位，默认:true\r\n          timeout: 10000,          //超过10秒后停止定位，默认：5s\r\n          buttonPosition: 'RB',    //定位按钮的停靠位置\r\n          buttonOffset: new AMap.Pixel(10, 20),//定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)\r\n          zoomToAccuracy: true,   //定位成功后是否自动调整地图视野到定位点\r\n\r\n        });\r\n        map.addControl(geolocation);\r\n        geolocation.getCurrentPosition(function (status, result) {\r\n          if (status == 'complete') {\r\n            _this.getSpaceNum(result.position.lng, result.position.lat)\r\n          } else {\r\n            // _this.onError(result)\r\n          }\r\n        });\r\n      });\r\n    },\r\n    getNeedData(groupCode) {\r\n      let _this = this\r\n      let params = {\r\n        \"data\": {\r\n          groupCode,\r\n        },\r\n      }\r\n      _this.$api.fetch({\r\n        params, //参数\r\n        apiUrl: '/moreFun/activityList', //接口地址\r\n      }).then(res => {\r\n        _this.needData = res\r\n      })\r\n    },\r\n    goWay(item) {\r\n      console.log(item.url);\r\n      // window.open(item.url);\r\n      window.location.href = item.url;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.visit-pre {\r\n  .van-cell--large {\r\n    border-bottom: 1px solid #666;\r\n  }\r\n  .van-search {\r\n    padding: 5px 12px;\r\n    margin: 0 10px;\r\n    border-radius: 3px;\r\n  }\r\n  .van-field__control {\r\n    color: #fff !important;\r\n  }\r\n  .search_box {\r\n    width: 100%;\r\n    height: 3rem;\r\n    background: #3649B3;\r\n    .address_content {\r\n      .address {\r\n        background: #3649B3;\r\n        border: none;\r\n        padding: 5% 1%;\r\n        .van-field__control {\r\n          color: #fff !important;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .content-padded {\r\n    margin: 0;\r\n    .kr-body {\r\n      height: 90%;\r\n      overflow-y: auto;\r\n      padding: 15px 10px 10px 10px;\r\n      .kr-div-parent {\r\n        // box-shadow: 0px 1px 9px -1px #888;\r\n        .van-cell {\r\n          margin-bottom: 10px;\r\n          box-shadow: 0px 1px 9px -1px #888;\r\n          border-radius: 10px;\r\n        }\r\n        .kr-containt {\r\n          // border: 1px solid #e6e6e6;\r\n          box-shadow: 1px 1px 5px 1px #888888;\r\n          padding: 15px 10px;\r\n          border-radius: 15px;\r\n          margin-bottom: 10px;\r\n          display: flex;\r\n          width: 100%;\r\n          .yh-left {\r\n            display: flex;\r\n            flex-direction: column;\r\n            justify-content: space-between;\r\n            width: 70%;\r\n            .yh-left-top {\r\n              .yh-left-title {\r\n                font-size: 0.8rem;\r\n                font-weight: bold;\r\n              }\r\n            }\r\n            .yh-left-middle {\r\n              .yh-left-title {\r\n                font-size: 0.8rem;\r\n              }\r\n            }\r\n            .yh-left-bottom {\r\n              .yh-bottom-div {\r\n                display: inline-block;\r\n                width: 100%;\r\n                display: flex;\r\n                justify-content: flex-start;\r\n                align-items: center;\r\n                span {\r\n                  font-size: 0.6rem;\r\n                  color: #7d7d7d;\r\n                  margin-left: 0.5rem;\r\n                }\r\n                img {\r\n                  width: 6%;\r\n                }\r\n                .img-yj {\r\n                  width: 30%;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          .yh-right {\r\n            width: 30%;\r\n            text-align: right;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            img {\r\n              width: 100%;\r\n            }\r\n          }\r\n          .yh-title {\r\n            margin-left: 0.5rem;\r\n            border: 0;\r\n            font-size: 1rem;\r\n            font-weight: bold;\r\n            // color:#1f55ad;\r\n          }\r\n        }\r\n        .yh-bottom {\r\n          // box-shadow: 1px 1px 5px 1px #888888;\r\n          padding: 15px 10px;\r\n          border-radius: 15px;\r\n          margin-bottom: 10px;\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          margin-top: 55%;\r\n          .yh-title {\r\n            font-size: 0.8rem;\r\n            color: #9f9f9f;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/project/mywater/service/visitPre.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"visit-pre\"},[_c('page-content',[_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('div',{staticClass:\"content-padded\"},[_c('div',{staticClass:\"search_box\"},[_c('div',{staticClass:\"address_content\"},[_c('van-field',{staticClass:\"address\",attrs:{\"label\":\"所属地区\",\"readonly\":\"\",\"left-icon\":\"location-o\",\"right-icon\":\"arrow\",\"placeholder\":\"请选择地区\"},on:{\"click\":_vm.showAddressChuang},model:{value:(_vm.groupName),callback:function ($$v) {_vm.groupName=$$v},expression:\"groupName\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"kr-body\",on:{\"touchmove\":function($event){_vm.touchmove($event)},\"scroll\":function($event){_vm.scroll($event)}}},[_c('div',{staticClass:\"kr-div-parent\"},[(_vm.needData.length ==0)?_c('div',{staticClass:\"yh-bottom\"},[_c('div',{staticClass:\"yh-title\"},[_vm._v(\"暂无参观预约活动\")])]):_vm._e(),_vm._v(\" \"),(_vm.needData.length !== 0)?_c('div',_vm._l((_vm.needData),function(item,i){return _c('div',{key:i,staticClass:\"kr-containt\",on:{\"click\":function($event){_vm.goWay(item)}}},[_c('div',{staticClass:\"yh-left\"},[_c('div',{staticClass:\"yh-left-top\"},[_c('span',{staticClass:\"yh-left-title\"},[_vm._v(_vm._s(item.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"yh-left-middle\"},[_vm._v(\"    \\n                    \"),_c('span',{staticClass:\"yh-left-title\"},[_vm._v(_vm._s(item.content))])]),_vm._v(\" \"),_c('div',{staticClass:\"yh-left-bottom\"},[_c('div',{staticClass:\"yh-bottom-div\"},[_c('img',{attrs:{\"src\":require(\"../../../../static/img/shijian.png\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.time))])])])]),_vm._v(\" \"),_c('div',{staticClass:\"yh-right\"},[_c('img',{attrs:{\"src\":item.icon,\"alt\":\"\"}})])])})):_vm._e()])])])])],1),_vm._v(\" \"),_c('van-popup',{style:({ height: '40%' }),attrs:{\"position\":\"bottom\"},model:{value:(_vm.relationShow),callback:function ($$v) {_vm.relationShow=$$v},expression:\"relationShow\"}},[_c('van-area',{attrs:{\"area-list\":_vm.areaList,\"value\":_vm.areaNum},on:{\"confirm\":_vm.sure,\"cancel\":_vm.exit,\"change\":_vm.onChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-077b03d9\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/project/mywater/service/visitPre.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}