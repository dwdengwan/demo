webpackJsonp([33],{BWWp:function(t,e,i){var a=i("S/Vu");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("po5z")("08e2c3e9",a,!0)},"S/Vu":function(t,e,i){e=t.exports=i("FZ+f")(void 0),e.push([t.i,".account-bind .content-padded[data-v-2c5ee848]{margin:0;height:100%}.account-bind .content-padded .img_content[data-v-2c5ee848],.account-bind .content-padded .myheader[data-v-2c5ee848]{height:9rem}.account-bind .submit_btn[data-v-2c5ee848]{margin-top:4%}.account-bind .bottom_content[data-v-2c5ee848]{width:94%;position:absolute;top:6rem;left:3%;margin-left:0}.account-bind .bottom_content .col-100[data-v-2c5ee848]{width:100%;margin-left:0}.account-bind .content-block .col-100[data-v-2c5ee848]{text-align:center;margin-left:2%}.account-bind .content-block a[data-v-2c5ee848]{font-size:.9rem;height:2.8rem;line-height:2.8rem;width:88%;background:#479eff;display:inline-block;border-radius:3px;font-weight:500}.account-bind .kr-link[data-v-2c5ee848]{padding:10px 6%}.account-bind .kr-link .router-link-active[data-v-2c5ee848]{color:#4da0fe;font-size:15px;display:inline-block;border-bottom:1px solid #4da0fe}.account-bind .col-100 .kr-body[data-v-2c5ee848]{padding:10px}.account-bind .col-100 .kr-body .kr-body-info[data-v-2c5ee848]{border-radius:5px;background:#fff;-webkit-box-shadow:1px 1px 5px 1px #888;box-shadow:1px 1px 5px 1px #888}.account-bind .col-100 .kr-body .kr-body-info .kr-containt .kr-div[data-v-2c5ee848]{padding:10px;font-weight:300;font-size:16px}.account-bind .col-100 .kr-body .kr-body-info .kr-containt .kr-div .van-field__body[data-v-2c5ee848]{padding:0}.account-bind .col-100 .kr-body .kr-body-info .kr-containt .kr-div .van-cell[data-v-2c5ee848]{padding:10px 0}.account-bind .col-100 .kr-body .kr-body-info .kr-containt .kr-div .kr-name[data-v-2c5ee848]{display:inline-block;width:30%;font-weight:600}.account-bind .col-100 .kr-body .kr-body-info .kr-containt .kr-div .kr-title[data-v-2c5ee848]{color:#000;font-weight:600}.account-bind .col-100 .kr-body .kr-body-info .kr-containt .kr-div input[data-v-2c5ee848],.account-bind .col-100 .kr-body .kr-body-info .kr-containt .kr-div select[data-v-2c5ee848]{color:#000;font-weight:600;border:0}.account-bind .col-100 .kr-body .kr-body-info .kr-containt .kr-div select[data-v-2c5ee848]{width:30%}.account-bind .col-100 .kr-body .kr-body-info .kr-containt .kr-line[data-v-2c5ee848]{width:90%;height:1px;background:#ebebeb;margin:0 auto}",""])},afrt:function(t,e,i){"use strict";function a(t){i("BWWp")}Object.defineProperty(e,"__esModule",{value:!0});var o=i("mvHQ"),n=i.n(o),s=i("Gs2z"),l=i("Fd2+"),r=i("rYnR"),c={components:{myHeader:r.default,headerThree:s.a,"van-popup":l.c,"van-area":l.a},data:function(){return{leftIocn:"phone-o",message:{title:"账号绑定",isShow:""},isLoading:!1,scrollTop:0,title:"账号绑定",type:"number",num:0,reg:"",valTrue:1,relationShow:!1,relationShipShow:!1,list:{openId:"1",groupCode:"",groupFullName:"1",type:"1",typeName:"手机号",value:"",name:""},options:["手机号","身份证号","营业执照号","用户编号","银行卡号"],arrList:[],arrListName:[],arrListCode:[],showAddress:!1,areaNum:"01013",areaList:{},userlist:{address:""}}},mounted:function(){console.log(this.areaList),this.getArrList()},methods:{scroll:function(t){parseInt(t.target.clientHeight)+Math.ceil(t.target.scrollTop)===parseInt(t.target.scrollHeight)||0==t.target.scrollTop&&t.stopPropagation(),this.$set(this,"scrollTop",t.target.scrollTop)},touchmove:function(t){0!==this.scrollTop&&t.stopPropagation()},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,t.getArrList()},500)},showAddressChuang:function(){this.relationShow=!0},sure:function(t){console.log(t),void 0===t[2]||""==t[2].code?(this.list.groupCode=t[1].code.slice(2),this.userlist.address=t[0].name+t[1].name):(this.list.groupCode=t[2].code.slice(4),this.userlist.address=t[0].name+t[1].name+t[2].name),this.userlist.address=this.userlist.address.replace("*",""),this.relationShow=!1},exit:function(){this.relationShow=!1},onChange:function(){},getArrList:function(){var t=this,e={data:{openId:localStorage.getItem("openId")}};t.$api.fetch({params:e,apiUrl:"/common/wAreaTree"}).then(function(e){t.areaList.province_list=e.provinceMap,t.areaList.city_list=e.cityMap,t.areaList.county_list=e.areaMap,t.getBindData()})},getBindData:function(){var t=this,e={data:{}};t.$api.fetch({params:e,apiUrl:"/common/getUserInfo"}).then(function(e){var i=e.bwcList;if(console.log(i),i.length>0){t.list.groupCode=i[0].groupCode,t.userlist.address=i[0].groupName;var a=t.list.groupCode,o=t.areaList.county_list,n=t.areaList.city_list,s=t.areaNum;t.areaNum=t.common.companyTree(a,o,n,s)}else t.getGeolocation()})},getSpaceNum:function(t,e){var i=this,a={data:{longitude:t,latitude:e}};i.$api.fetch({params:a,apiUrl:"/common/getShortestComp"}).then(function(t){i.$set(i.list,"groupCode",t.groupCode),i.$set(i.userlist,"address",t.groupArea)})},getGeolocation:function(){var t=this,e=new AMap.Map("container",{resizeEnable:!0});AMap.plugin("AMap.Geolocation",function(){var i=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});e.addControl(i),i.getCurrentPosition(function(e,i){"complete"==e&&t.getSpaceNum(i.position.lng,i.position.lat)})})},changeType:function(){0==this.num?this.type="number":this.type="text"},inputNum:function(t){var e=this.num;if(console.log(t,e),0==e){if(""==t){return l.d.fail("手机号不能为空!"),void(this.valTrue=0)}if(!/^1([38]\d|5[0-35-9]|7[3678])\d{8}$/.test(t)){return l.d.fail("手机号格式有误!"),void(this.valTrue=0)}this.list.value=t,this.valTrue=1}else if(1==e){if(""==t){return l.d.fail("身份证号不能为空!"),void(this.valTrue=0)}if(!/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(t)){return l.d.fail("身份证号格式有误!"),void(this.valTrue=0)}this.list.value=t,this.valTrue=1}else if(2==e){if(""==t){return l.d.fail("营业执照号不能为空!"),void(this.valTrue=0)}if(!/^(?:(?![IOZSV])[\dA-Z]){2}\d{6}(?:(?![IOZSV])[\dA-Z]){10}$/.test(t)){return l.d.fail("营业执照号格式有误!"),void(this.valTrue=0)}this.list.value=t,this.valTrue=1}else if(3==e){if(""==t){return l.d.fail("用户编号不能为空!"),void(this.valTrue=0)}if(!/^[a-zA-Z0-9]{1,16}$/.test(t)){return l.d.fail("用户编号格式有误!"),void(this.valTrue=0)}this.list.value=t,this.valTrue=1}else if(4==e){if(""==t){return l.d.fail("银行卡号不能为空!"),void(this.valTrue=0)}if(!/^([1-9]{1})(\d{14}|\d{18})$/.test(t)){return l.d.fail("银行卡号格式有误!"),void(this.valTrue=0)}this.list.value=t,this.valTrue=1}},inputUserName:function(t){if(""===t){l.d.fail("用户名称不能为空!")}},submit:function(){var t="";if(""==this.list.groupCode)t="所属区域不能为空",l.d.fail(t);else if(""==this.list.value)t=this.options[this.num]+"不能为空",l.d.fail(t);else if(""==this.list.name)t="用户名称不能为空",l.d.fail(t);else{var e=this,i={};i.groupCode=e.list.groupCode,i.type=e.list.type,i.value=e.list.value,i.name=e.list.name,i.openId=localStorage.getItem("openId");var a={data:i};""!==this.list.value&&(this.inputNum(this.list.value),1==this.valTrue&&this.$api.fetch({params:a,apiUrl:"/myWater/userBindQuery"}).then(function(t){t.length>0&&localStorage.setItem("groupCode",t[0].groupCode);var i="";if(t.length>1){for(var a=0;a<t.length;a++)a<t.length-1?i+=n()(t[a])+"/":i+=n()(t[a]);e.$router.push({path:"/accBind",query:i})}else if(1==t.length)console.log(t[0]),i+=n()(t[0]),e.$router.push({path:"/accBind",query:i});else if(0==t.length){l.d.fail("您想绑定的用户已全部绑定。")}})),console.log(i)}},selectRelation:function(t){0==t?this.relationShow=!0:this.relationShipShow=!0},onCancelRelation:function(){this.relationShow=!1},onCancelRelation1:function(){this.relationShipShow=!1},onConfirmRelation:function(t,e){this.list.groupCode=this.arrListCode[e],this.list.groupFullName=t,this.relationShow=!1},onConfirmRelation1:function(t,e){console.log(t,e),1==e?this.leftIocn="idcard":2==e?this.leftIocn="ecard-pay":3==e?this.leftIocn="contact":4==e&&(this.leftIocn="cash-on-deliver"),this.num=e,this.list.type=(e+1).toString(),this.list.typeName=t,this.list.value="",this.relationShipShow=!1}}},d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"account-bind"},[i("page-content",[i("div",{staticClass:"content-padded"},[i("headerThree",{attrs:{message:t.message}}),t._v(" "),i("div",{staticClass:"row bottom_content"},[i("div",{staticClass:"col-100 user_content"},[i("div",{staticClass:"kr-body"},[i("div",{staticClass:"kr-body-info"},[i("div",{staticClass:"kr-containt"},[i("div",{staticClass:"kr-div"},[i("van-field",{staticClass:"yh-my-blue",attrs:{"left-icon":"location-o",readonly:"",placeholder:"请选择所属地区",label:"所属地区","right-icon":"arrow"},on:{click:t.showAddressChuang,"click-right-icon":t.showAddressChuang},model:{value:t.userlist.address,callback:function(e){t.$set(t.userlist,"address",e)},expression:"userlist.address"}})],1),t._v(" "),i("div",{staticClass:"kr-line"}),t._v(" "),i("div",{staticClass:"kr-div"},[i("van-field",{staticClass:"yh-my-red",attrs:{"left-icon":"records",label:"绑定方式",readonly:"",placeholder:"请选择绑定方式","right-icon":"arrow",size:"large"},on:{click:function(e){t.selectRelation(1)},"click-right-icon":function(e){t.selectRelation(1)}},model:{value:t.list.typeName,callback:function(e){t.$set(t.list,"typeName",e)},expression:"list.typeName"}})],1),t._v(" "),i("div",{staticClass:"kr-line"}),t._v(" "),i("div",{staticClass:"kr-div"},[i("van-field",{staticClass:"yh-my-blue",attrs:{type:t.type,"left-icon":t.leftIocn,label:t.options[t.num],placeholder:"请输入"+t.options[t.num],oninput:"this.value=this.value.replace(/[^0-9.a-zA-Z]+/,'');",clearable:"",size:"large"},on:{blur:function(e){t.inputNum(t.list.value)},focus:function(e){t.changeType()}},model:{value:t.list.value,callback:function(e){t.$set(t.list,"value",e)},expression:"list.value"}})],1),t._v(" "),i("div",{staticClass:"kr-line"}),t._v(" "),i("div",{staticClass:"kr-div"},[i("van-field",{staticClass:"yh-my-red",attrs:{type:"text","left-icon":"user-o",label:"用户名称",placeholder:"请输入用户名称",clearable:"",size:"large"},on:{blur:function(e){t.inputUserName(t.list.name)}},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1)])])]),t._v(" "),i("van-popup",{style:{height:"40%"},attrs:{position:"bottom"},model:{value:t.relationShow,callback:function(e){t.relationShow=e},expression:"relationShow"}},[i("van-area",{attrs:{"area-list":t.areaList,value:t.areaNum,id:"yh-area"},on:{confirm:t.sure,cancel:t.exit,change:t.onChange}})],1),t._v(" "),i("van-popup",{style:{height:"40%"},attrs:{position:"bottom"},model:{value:t.relationShipShow,callback:function(e){t.relationShipShow=e},expression:"relationShipShow"}},[i("van-picker",{staticClass:"timepicker",attrs:{"show-toolbar":"",title:"绑定方式",columns:t.options},on:{cancel:t.onCancelRelation1,confirm:t.onConfirmRelation1}})],1),t._v(" "),i("div",{staticClass:"content-block submit_btn"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-100"},[i("m-button",{attrs:{size:"large",active:!0},nativeOn:{click:function(e){t.submit(e)}}},[t._v("绑定")])],1)])])],1)])],1)])],1)},u=[],h={render:d,staticRenderFns:u},p=h,v=i("VU/8"),f=a,m=v(c,p,!1,f,"data-v-2c5ee848",null);e.default=m.exports}});
//# sourceMappingURL=33.03094a5488ce025b7926.js.map