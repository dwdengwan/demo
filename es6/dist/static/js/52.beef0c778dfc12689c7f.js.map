{"version":3,"sources":["webpack:///static/js/52.beef0c778dfc12689c7f.js","webpack:///./src/project/moresurprise/myMap.vue?faee","webpack:///./src/project/moresurprise/myMap.vue","webpack:///src/project/moresurprise/myMap.vue","webpack:///./src/project/moresurprise/myMap.vue?cbb9","webpack:///./src/project/moresurprise/myMap.vue?6f57"],"names":["webpackJsonp","YmNV","module","exports","__webpack_require__","content","i","locals","hadM","__webpack_exports__","injectStyle","ssrContext","Object","defineProperty","value","myHeader","es","myMap","components","props","data","self","this","title","zoom","center","searchOption","city","citylimit","marker","position","address","lng","lat","events","click","e","_e$lnglat","lnglat","AMap","Geocoder","radius","extensions","getAddress","status","result","info","regeocode","formattedAddress","$nextTick","plugin","pName","init","o","getCurrentPosition","mounted","initConfigMes","$","attr","before","methods","getUserMes","mapNeedData","province","onSearchResult","pois","console","log","_this","params","url","window","location","href","$api","fetch","apiUrl","then","res","wxData","wx","config","appId","timestamp","nonceStr","signature","jsApiList","ready","getLocation","type","success","latitude","longitude","speed","accuracy","fail","err","onClickLeft","backChange","onClickRight","num","item","leakAddress","BUS","$emit","$parent","leakandrepairsShow","repairMapShow","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","left-text","right-text","left-arrow","on","click-left","click-right","_v","search-option","on-search-result","keyup","$event","_k","keyCode","key","vid","visible","draggable","label","rows","autosize","placeholder","readonly","staticRenderFns","esExports","moresurprise_myMap","normalizeComponent","__vue_styles__","Component","vPhR","undefined","push"],"mappings":"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","file":"static/js/52.beef0c778dfc12689c7f.js","sourcesContent":["webpackJsonp([52],{\n\n/***/ \"YmNV\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"vPhR\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"po5z\")(\"0321e71e\", content, true);\n\n/***/ }),\n\n/***/ \"hadM\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/comments/myHeader.vue + 2 modules\nvar myHeader = __webpack_require__(\"rYnR\");\n\n// EXTERNAL MODULE: ./node_modules/vant/es/index.js + 137 modules\nvar es = __webpack_require__(\"Fd2+\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/project/moresurprise/myMap.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var myMap = ({\n  components: {\n    myHeader: myHeader[\"default\"]\n  },\n  props: ['mapNeedData', 'leakAddress'],\n  data: function data() {\n    var self = this;\n    return {\n      title: '报修地点',\n      zoom: 16,\n      center: [121.52014, 31.198862],\n      searchOption: {\n        city: '深圳市',\n        citylimit: true\n      },\n      marker: {\n        position: [121.52014, 31.198862]\n      },\n      address: '',\n      lng: 0,\n      lat: 0,\n      events: {\n        click: function click(e) {\n          var _e$lnglat = e.lnglat,\n              lng = _e$lnglat.lng,\n              lat = _e$lnglat.lat;\n\n          self.lng = lng;\n          self.lat = lat;\n          self.marker.position = [lng, lat];\n          // 这里通过高德 SDK 完成。\n          var geocoder = new AMap.Geocoder({\n            radius: 1000,\n            extensions: \"all\"\n          });\n          geocoder.getAddress([lng, lat], function (status, result) {\n            if (status === 'complete' && result.info === 'OK') {\n              if (result && result.regeocode) {\n                self.address = result.regeocode.formattedAddress;\n                self.$nextTick();\n              }\n            }\n          });\n        }\n      },\n      plugin: [{\n        pName: 'Geolocation',\n        events: {\n          init: function init(o) {\n            // o 是高德地图定位插件实例\n            o.getCurrentPosition(function (status, result) {\n              if (result && result.position) {\n                //高德地图的定位\n                self.lng = result.position.lng;\n                self.lat = result.position.lat;\n                self.center = [self.lng, self.lat];\n                self.marker.position = [self.lng, self.lat];\n\n                var geocoder = new AMap.Geocoder({\n                  radius: 1000,\n                  extensions: \"all\"\n                });\n                geocoder.getAddress([self.lng, self.lat], function (status, result) {\n\n                  if (status === 'complete' && result.info === 'OK') {\n                    if (result && result.regeocode) {\n                      self.address = result.regeocode.formattedAddress;\n                      self.$nextTick();\n                    }\n                  }\n                });\n                self.$nextTick();\n              }\n            });\n          }\n        }\n      }]\n\n    };\n  },\n  mounted: function mounted() {\n    // 微信自带定位\n    this.initConfigMes();\n    // 高德定位\n    // this.getUserMes();\n\n    // 修改搜索框样式\n    $('.myMap .search-box .search-box-wrapper input').attr('placeholder', '查找地点');\n    var div = '<img src=\"../../../static/img/fangdajing.png\" alt=\"\" height=\"22px\" style=\"margin-left:2%\">';\n    $('.myMap .search-box .search-box-wrapper input').before(div);\n  },\n\n  methods: {\n    getUserMes: function getUserMes() {\n      this.searchOption = {\n        city: this.mapNeedData.province,\n        citylimit: true\n      };\n      this.title = this.mapNeedData.province;\n\n      this.$nextTick();\n    },\n    onSearchResult: function onSearchResult(pois) {\n      console.log(pois);\n      var _this = this;\n      var lng = pois[0].lng;\n      var lat = pois[0].lat;\n      this.center = [lng, lat];\n      this.marker.position = [lng, lat];\n      //地址转换中文\n      var geocoder = new AMap.Geocoder({\n        radius: 1000,\n        extensions: \"all\"\n      });\n      geocoder.getAddress([lng, lat], function (status, result) {\n        if (status === 'complete' && result.info === 'OK') {\n          if (result && result.regeocode) {\n            _this.address = result.regeocode.formattedAddress;\n            _this.$nextTick();\n          }\n        }\n      });\n    },\n    initConfigMes: function initConfigMes() {\n      //微信的定位\n      var _this = this;\n      this.title = this.mapNeedData.province;\n      var params = {\n        data: {\n          url: window.location.href\n        }\n      };\n      this.$api.fetch({\n        params: params, //参数\n        apiUrl: '/public/wxConfigMes' //接口地址\n      }).then(function (res) {\n        _this.wxData = res;\n        // 微信注册\n        _this.wx.config({\n          // debug: true, //调试阶段建议开启  \n          appId: res.appId, //APPID  \n          timestamp: res.timestamp, //时间戳timestamp  \n          nonceStr: res.nonceStr, //随机数nonceStr  \n          signature: res.signature, //签名signature  \n          jsApiList: ['getLocation']\n        });\n        _this.wx.ready(function (res) {\n          // 调用\n          _this.wx.getLocation({\n            type: 'gcj02', // 默认为wgs84的gps坐标，如果要返回直接给openLocation用的火星坐标，可传入'gcj02'\n            success: function success(res) {\n              var latitude = res.latitude; // 纬度，浮点数，范围为90 ~ -90\n              var longitude = res.longitude; // 经度，浮点数，范围为180 ~ -180。\n              var speed = res.speed; // 速度，以米/每秒计\n              var accuracy = res.accuracy; // 位置精度\n\n              _this.lng = longitude;\n              _this.lat = latitude;\n              _this.center = [longitude, latitude];\n              _this.marker.position = [longitude, latitude];\n              //地址转换中文\n              // var geocoder = new AMap.Geocoder({\n              //   radius: 1000,\n              //   extensions: \"all\"\n              // });\n              var geocoder = new AMap.Geocoder();\n              geocoder.getAddress([longitude, latitude], function (status, result) {\n                if (status === 'complete' && result.info === 'OK') {\n                  if (result && result.regeocode) {\n                    _this.address = result.regeocode.formattedAddress;\n                    _this.$nextTick();\n                  }\n                }\n              });\n              _this.$nextTick();\n              //   _this.$nextTick(() => {\n              // });\n            },\n            fail: function fail(err) {}\n          });\n        });\n      });\n    },\n    onClickLeft: function onClickLeft() {\n      this.backChange(0);\n    },\n    onClickRight: function onClickRight() {\n      if (this.address == '') {\n        if (this.mapNeedData.content == 'repair') {\n          es[\"d\" /* Toast */].fail('报障地点不能为空');\n          return;\n        } else if (this.mapNeedData.content == 'leak') {\n          es[\"d\" /* Toast */].fail('报漏地点不能为空');\n          return;\n        }\n      }\n      this.backChange(1);\n    },\n    backChange: function backChange(num) {\n      var item = {};\n      if (num == 0) {\n        item.address = this.leakAddress;\n      } else if (num == 1) {\n        item.address = this.address;\n      }\n      this.BUS.$emit('getAddress', item.address, this.mapNeedData.content);\n      this.$parent.leakandrepairsShow = true;\n      this.$parent.repairMapShow = false;\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7fd38e98\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/project/moresurprise/myMap.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myMap\"},[_c('page-content',[_c('van-nav-bar',{attrs:{\"title\":_vm.title,\"left-text\":\"返回\",\"right-text\":\"确定\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft,\"click-right\":_vm.onClickRight}}),_vm._v(\" \"),_c('div',{staticClass:\"map_content\"},[_c('div',{staticClass:\"amap-page-container\"},[_c('el-amap-search-box',{staticClass:\"search-box\",attrs:{\"search-option\":_vm.searchOption,\"on-search-result\":_vm.onSearchResult},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.onSearchResult($event)}}}),_vm._v(\" \"),_c('el-amap',{staticClass:\"amap-demo\",attrs:{\"vid\":\"amapDemo\",\"plugin\":_vm.plugin,\"center\":_vm.center,\"zoom\":_vm.zoom,\"events\":_vm.events}},[_c('el-amap-marker',{attrs:{\"position\":_vm.marker.position,\"events\":_vm.marker.events,\"visible\":_vm.marker.visible,\"draggable\":_vm.marker.draggable}})],1),_vm._v(\" \"),_c('van-field',{staticClass:\"kron-field\",attrs:{\"label\":\"报修地址：\",\"rows\":\"3\",\"autosize\":\"\",\"type\":\"textarea\",\"value\":_vm.address,\"placeholder\":\"请选择报修地址\",\"readonly\":\"\"}})],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var moresurprise_myMap = (esExports);\n// CONCATENATED MODULE: ./src/project/moresurprise/myMap.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"YmNV\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7fd38e98\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  myMap,\n  moresurprise_myMap,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var project_moresurprise_myMap = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"vPhR\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".myMap .el-vue-search-box-container .search-tips[data-v-7fd38e98]{border:none}.myMap .map_content[data-v-7fd38e98]{height:93%;margin:0}.myMap .map_content .amap-page-container[data-v-7fd38e98]{height:86%}.myMap .map_content .amap-page-container .search-box[data-v-7fd38e98]{width:90%;height:46px;line-height:46px;position:absolute;top:55px;left:5%}.myMap .map_content .amap-page-container .kron-field[data-v-7fd38e98]{height:18%}\", \"\"]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/52.beef0c778dfc12689c7f.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7fd38e98\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./myMap.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-loader/node_modules/vue-style-loader/lib/addStylesClient.js\")(\"0321e71e\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7fd38e98\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/project/moresurprise/myMap.vue\n// module id = YmNV\n// module chunks = 10 52","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7fd38e98\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./myMap.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./myMap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7fd38e98\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./myMap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7fd38e98\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/project/moresurprise/myMap.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"myMap\">\r\n    <page-content>\r\n      <!-- <myHeader :title=\"title\"></myHeader> -->\r\n      <van-nav-bar :title=\"title\" left-text=\"返回\" right-text=\"确定\" left-arrow @click-left=\"onClickLeft\" @click-right=\"onClickRight\" />\r\n      <div class=\"map_content\">\r\n        <div class=\"amap-page-container\">\r\n          <el-amap-search-box class=\"search-box\" :search-option=\"searchOption\" @keyup.enter=\"onSearchResult\" :on-search-result=\"onSearchResult\">\r\n          </el-amap-search-box>\r\n          <el-amap vid=\"amapDemo\" :plugin=\"plugin\" class=\"amap-demo\" :center=\"center\" :zoom=\"zoom\" :events=\"events\">\r\n            <el-amap-marker :position=\"marker.position\" :events=\"marker.events\" :visible=\"marker.visible\" :draggable=\"marker.draggable\"></el-amap-marker>\r\n          </el-amap>\r\n          <!-- <div class=\"toolbar\">报修地址:{{ address }} </div> -->\r\n          <!-- <div class=\"toolbar\">坐标:[{{ lng }}, {{ lat }}] </div> -->\r\n          <van-field class=\"kron-field\" label=\"报修地址：\" rows=\"3\" autosize type=\"textarea\" :value=\"address\" placeholder=\"请选择报修地址\" readonly />\r\n        </div>\r\n      </div>\r\n    </page-content>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport myHeader from '@/comments/myHeader'\r\nimport { Toast } from 'vant'\r\nexport default {\r\n  components: {\r\n    myHeader,\r\n  },\r\n  props: ['mapNeedData', 'leakAddress'],\r\n  data() {\r\n    let self = this;\r\n    return {\r\n      title: '报修地点',\r\n      zoom: 16,\r\n      center: [121.52014, 31.198862],\r\n      searchOption: {\r\n        city: '深圳市',\r\n        citylimit: true\r\n      },\r\n      marker: {\r\n        position: [121.52014, 31.198862]\r\n      },\r\n      address: '',\r\n      lng: 0,\r\n      lat: 0,\r\n      events: {\r\n        click(e) {\r\n          let { lng, lat } = e.lnglat;\r\n          self.lng = lng;\r\n          self.lat = lat;\r\n          self.marker.position = [lng, lat]\r\n          // 这里通过高德 SDK 完成。\r\n          var geocoder = new AMap.Geocoder({\r\n            radius: 1000,\r\n            extensions: \"all\"\r\n          });\r\n          geocoder.getAddress([lng, lat], function (status, result) {\r\n            if (status === 'complete' && result.info === 'OK') {\r\n              if (result && result.regeocode) {\r\n                self.address = result.regeocode.formattedAddress;\r\n                self.$nextTick();\r\n              }\r\n            }\r\n          });\r\n        }\r\n      },\r\n      plugin: [{\r\n        pName: 'Geolocation',\r\n        events: {\r\n          init(o) {\r\n            // o 是高德地图定位插件实例\r\n            o.getCurrentPosition((status, result) => {\r\n              if (result && result.position) {\r\n                //高德地图的定位\r\n                self.lng = result.position.lng;\r\n                self.lat = result.position.lat;\r\n                self.center = [self.lng, self.lat];\r\n                self.marker.position = [self.lng, self.lat];\r\n\r\n                var geocoder = new AMap.Geocoder({\r\n                  radius: 1000,\r\n                  extensions: \"all\"\r\n                });\r\n                geocoder.getAddress([self.lng, self.lat], function (status, result) {\r\n\r\n                  if (status === 'complete' && result.info === 'OK') {\r\n                    if (result && result.regeocode) {\r\n                      self.address = result.regeocode.formattedAddress;\r\n                      self.$nextTick();\r\n                    }\r\n                  }\r\n                });\r\n                self.$nextTick();\r\n              }\r\n            });\r\n          },\r\n\r\n        }\r\n      }]\r\n\r\n    }\r\n  },\r\n  mounted() {\r\n    // 微信自带定位\r\n    this.initConfigMes();\r\n    // 高德定位\r\n    // this.getUserMes();\r\n\r\n    // 修改搜索框样式\r\n    $('.myMap .search-box .search-box-wrapper input').attr('placeholder', '查找地点')\r\n    let div = '<img src=\"../../../static/img/fangdajing.png\" alt=\"\" height=\"22px\" style=\"margin-left:2%\">'\r\n    $('.myMap .search-box .search-box-wrapper input').before(div)\r\n\r\n  },\r\n  methods: {\r\n    getUserMes() {\r\n      this.searchOption = {\r\n        city: this.mapNeedData.province,\r\n        citylimit: true\r\n      }\r\n      this.title = this.mapNeedData.province;\r\n\r\n      this.$nextTick();\r\n    },\r\n    onSearchResult(pois) {\r\n      console.log(pois);\r\n      var _this = this\r\n      var lng = pois[0].lng\r\n      var lat = pois[0].lat\r\n      this.center = [lng, lat];\r\n      this.marker.position = [lng, lat]\r\n      //地址转换中文\r\n      var geocoder = new AMap.Geocoder({\r\n        radius: 1000,\r\n        extensions: \"all\"\r\n      });\r\n      geocoder.getAddress([lng, lat], function (status, result) {\r\n        if (status === 'complete' && result.info === 'OK') {\r\n          if (result && result.regeocode) {\r\n            _this.address = result.regeocode.formattedAddress;\r\n            _this.$nextTick();\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    initConfigMes() {\r\n      //微信的定位\r\n      let _this = this;\r\n      this.title = this.mapNeedData.province;\r\n      let params = {\r\n        data: {\r\n          url: window.location.href\r\n        },\r\n      }\r\n      this.$api.fetch({\r\n        params: params, //参数\r\n        apiUrl: '/public/wxConfigMes', //接口地址\r\n      }).then(res => {\r\n        _this.wxData = res;\r\n        // 微信注册\r\n        _this.wx.config({\r\n          // debug: true, //调试阶段建议开启  \r\n          appId: res.appId, //APPID  \r\n          timestamp: res.timestamp, //时间戳timestamp  \r\n          nonceStr: res.nonceStr, //随机数nonceStr  \r\n          signature: res.signature, //签名signature  \r\n          jsApiList: [\r\n            'getLocation'\r\n          ],\r\n        });\r\n        _this.wx.ready(res => {\r\n          // 调用\r\n          _this.wx.getLocation({\r\n            type: 'gcj02', // 默认为wgs84的gps坐标，如果要返回直接给openLocation用的火星坐标，可传入'gcj02'\r\n            success: function (res) {\r\n              var latitude = res.latitude; // 纬度，浮点数，范围为90 ~ -90\r\n              var longitude = res.longitude; // 经度，浮点数，范围为180 ~ -180。\r\n              var speed = res.speed; // 速度，以米/每秒计\r\n              var accuracy = res.accuracy; // 位置精度\r\n\r\n              _this.lng = longitude;\r\n              _this.lat = latitude;\r\n              _this.center = [longitude, latitude];\r\n              _this.marker.position = [longitude, latitude];\r\n              //地址转换中文\r\n              // var geocoder = new AMap.Geocoder({\r\n              //   radius: 1000,\r\n              //   extensions: \"all\"\r\n              // });\r\n              var geocoder = new AMap.Geocoder()\r\n              geocoder.getAddress([longitude, latitude], function (status, result) {\r\n                if (status === 'complete' && result.info === 'OK') {\r\n                  if (result && result.regeocode) {\r\n                    _this.address = result.regeocode.formattedAddress;\r\n                    _this.$nextTick();\r\n                  }\r\n                }\r\n              });\r\n              _this.$nextTick();\r\n              //   _this.$nextTick(() => {\r\n              // });\r\n            },\r\n            fail: function (err) {\r\n            }\r\n          });\r\n        })\r\n\r\n      });\r\n    },\r\n    onClickLeft() {\r\n      this.backChange(0)\r\n    },\r\n    onClickRight() {\r\n      if (this.address == '') {\r\n        if (this.mapNeedData.content == 'repair') {\r\n          Toast.fail('报障地点不能为空');\r\n          return\r\n        } else if (this.mapNeedData.content == 'leak') {\r\n          Toast.fail('报漏地点不能为空');\r\n          return\r\n        }\r\n      }\r\n      this.backChange(1)\r\n    },\r\n    backChange(num) {\r\n      var item = {}\r\n      if (num == 0) {\r\n        item.address = this.leakAddress;\r\n      } else if (num == 1) {\r\n        item.address = this.address\r\n      }\r\n      this.BUS.$emit('getAddress', item.address, this.mapNeedData.content)\r\n      this.$parent.leakandrepairsShow = true\r\n      this.$parent.repairMapShow = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.myMap {\r\n  .el-vue-search-box-container .search-tips {\r\n    border: none;\r\n  }\r\n  .map_content {\r\n    height: 93%;\r\n    margin: 0;\r\n    .amap-page-container {\r\n      .search-box {\r\n        width: 90%;\r\n        height: 46px;\r\n        line-height: 46px;\r\n        position: absolute;\r\n        top: 55px;\r\n        left: 5%;\r\n      }\r\n      .kron-field {\r\n        height: 18%;\r\n      }\r\n      height: 86%;\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/project/moresurprise/myMap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myMap\"},[_c('page-content',[_c('van-nav-bar',{attrs:{\"title\":_vm.title,\"left-text\":\"返回\",\"right-text\":\"确定\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft,\"click-right\":_vm.onClickRight}}),_vm._v(\" \"),_c('div',{staticClass:\"map_content\"},[_c('div',{staticClass:\"amap-page-container\"},[_c('el-amap-search-box',{staticClass:\"search-box\",attrs:{\"search-option\":_vm.searchOption,\"on-search-result\":_vm.onSearchResult},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.onSearchResult($event)}}}),_vm._v(\" \"),_c('el-amap',{staticClass:\"amap-demo\",attrs:{\"vid\":\"amapDemo\",\"plugin\":_vm.plugin,\"center\":_vm.center,\"zoom\":_vm.zoom,\"events\":_vm.events}},[_c('el-amap-marker',{attrs:{\"position\":_vm.marker.position,\"events\":_vm.marker.events,\"visible\":_vm.marker.visible,\"draggable\":_vm.marker.draggable}})],1),_vm._v(\" \"),_c('van-field',{staticClass:\"kron-field\",attrs:{\"label\":\"报修地址：\",\"rows\":\"3\",\"autosize\":\"\",\"type\":\"textarea\",\"value\":_vm.address,\"placeholder\":\"请选择报修地址\",\"readonly\":\"\"}})],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7fd38e98\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/project/moresurprise/myMap.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".myMap .el-vue-search-box-container .search-tips[data-v-7fd38e98]{border:none}.myMap .map_content[data-v-7fd38e98]{height:93%;margin:0}.myMap .map_content .amap-page-container[data-v-7fd38e98]{height:86%}.myMap .map_content .amap-page-container .search-box[data-v-7fd38e98]{width:90%;height:46px;line-height:46px;position:absolute;top:55px;left:5%}.myMap .map_content .amap-page-container .kron-field[data-v-7fd38e98]{height:18%}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7fd38e98\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/project/moresurprise/myMap.vue\n// module id = vPhR\n// module chunks = 10 52"],"sourceRoot":""}