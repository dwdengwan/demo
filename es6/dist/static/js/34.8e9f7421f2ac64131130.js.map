{"version":3,"sources":["webpack:///static/js/34.8e9f7421f2ac64131130.js","webpack:///./src/project/mywater/waterquery/pages/moreAccount.vue","webpack:///src/project/mywater/waterquery/pages/moreAccount.vue","webpack:///./src/project/mywater/waterquery/pages/moreAccount.vue?13d6","webpack:///./src/project/mywater/waterquery/pages/moreAccount.vue?06e3","webpack:///./src/project/mywater/waterquery/pages/moreAccount.vue?df72"],"names":["webpackJsonp","Lsel","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","set","set_default","n","headerTwo","moreAccount","components","data","title","isLoading","scrollTop","checked","count","isShowBtn","isShowPrice","showData","isShowUL","isShowLink","ctmName","accountNo","accountBalance","ctmNo","groupCode","needData","order","mounted","this","init","methods","onRefresh","_this2","setTimeout","$toast","scroll","e","parseInt","target","clientHeight","Math","ceil","scrollHeight","stopPropagation","$set","touchmove","that","params","openId","localStorage","getItem","$api","fetch","apiUrl","then","res","list","$route","query","setItem","groupOpenId","goBill","item","console","log","event","userNo","$router","push","path","takeChage","i","$","is","parseFloat","arrears","css","num","j","length","a","has","pay","comfirm","Toast","fail","payType","payMoney","Number","feeType","appId","timeStamp","nonceStr","_package","package","signType","paySign","onBridgeReady","WeixinJSBridge","invoke","err_msg","getOrder","message","payStatus","success","moduleAccess","_this","moduleId","m","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","id","_l","key","code","nativeOn","click","_s","userName","staticStyle","text-overflow","userAddress","font-size","type","name","size","_e","show-cancel-button","confirm","model","callback","$$v","expression","staticRenderFns","esExports","pages_moreAccount","normalizeComponent","__vue_styles__","Component","TZ1l","exports","undefined","b+wz","content","locals"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,YCLA,SAAAC,GAAAC,GACAF,EAAA,QDKAG,OAAOC,eAAeL,EAAqB,cAAgBM,OAAO,GAGlE,IAAIC,GAAMN,EAAoB,QAC1BO,EAA2BP,EAAoBQ,EAAEF,GAGjDG,EAAYT,EAAoB,QE0FpCU,GFvFSV,EAAoB,SA4G3BW,YEjBFF,YAAA,GFoBEG,KAAM,WACJ,OACEC,MEnBN,QFqBMC,WEnBN,EFoBMC,UAAW,EAEXC,WACAC,MEnBN,EFoBMC,WEnBN,EFoBMC,aEnBN,EFoBMC,UACEC,UEnBR,EFoBQC,YAAY,EACZJ,WAAW,EACXK,QEnBR,GFoBQC,UEnBR,GFoBQC,eEnBR,GFoBQC,MEnBR,GFoBQC,UElBR,IFoBMC,YACAC,MElBN,KFqBEC,QAAS,WACPC,KEnBJC,QFsBEC,SACEC,UAAW,WACT,GAAIC,GAASJ,IAGbK,YAAW,WACTD,EAAOE,OEvBf,QFwBQF,EAAOrB,WEvBf,EFwBQqB,EEvBRH,QACA,MFyBIM,OAAQ,SAAgBC,GAClBC,SAASD,EAAEE,OAAOC,cAAgBC,KAAKC,KAAKL,EAAEE,OAAO1B,aAAeyB,SAASD,EAAEE,OAAOI,eAEzD,GAAtBN,EAAEE,OAAO1B,WAElBwB,EEvBRO,kBF0BMf,KAAKgB,KAAKhB,KAAM,YAAaQ,EAAEE,OEvBrC1B,YFyBIiC,UAAW,SAAmBT,GACL,IAAnBR,KAAKhB,WACPwB,EAAEO,mBAGNd,KAAM,WAGJ,GAAIiB,GEvBVlB,KFwBUmB,GACFtC,MACEuC,OAAQC,aAAaC,QEvB/B,UFwBU1B,UAAWyB,aAAaC,QEvBlC,aFwBU7B,UAAW4B,aAAaC,QErBlC,UFwBMtB,MAAKuB,KAAKC,OACRL,OAAQA,EACRM,OAAQ,yBEzBhBC,KAAA,SAAAC,GF2BQT,EAAKrB,SAAW8B,EEvBxBC,KFwBQV,EAAK7B,SAASK,eAAiBiC,EEvBvCjC,eFwBQwB,EAAK7B,SAASI,UAAYkC,EEvBlClC,UFwBQyB,EAAK7B,SAASG,QAAUmC,EEvBhCnC,QFwBQ0B,EAAK7B,SAASM,MAAQgC,EEvB9BhC,MFwBQuB,EAAK7B,SAASO,UAAYsB,EAAKW,OAAOC,MEvB9ClC,UFwBQyB,aAAaU,QAAQ,cAAeJ,EEvB5CK,gBF0BIC,OAAQ,SAAgBC,GACtBC,QAAQC,IEvBdF,GFwBMG,MEvBNtB,kBFwBMmB,EAAKtC,UAAYI,KAAK6B,OAAOC,MEvBnClC,UFwBMyB,aAAaU,QAAQ,YAAaG,EEvBxCtC,WFwBMyB,aAAaU,QAAQ,SAAUG,EEvBrCI,QFyBMtC,KAAKuC,QAAQC,MAAOC,KAAM,QAASX,MEvBzCI,KFyBIQ,UAAW,SAAmBC,EAAGT,GAC/BG,MEvBNtB,iBFwBM,IAAIG,GEvBVlB,IF+BM,IALI4C,EAAE,YAAcD,GAAGE,GAAG,YACxB3B,EAAKhC,OAAS4D,WAAWZ,EEvBjCa,SFyBQ7B,EAAKhC,OAAS4D,WAAWZ,EEvBjCa,SFyBwB,GAAd7B,EAAKhC,MEpBf,MFqBQ0D,GAAE,YAAYI,IAAI,SEvB1B,aFwBQ9B,EAAK/B,WEvBb,EF2BM,KAAK,GADD8D,MACKC,EAAI,EAAGA,EAAIhC,EAAKrB,SAASsD,OAAQD,IACpCN,EAAE,YAAcM,GAAGL,GAAG,YACxBI,EAAIC,GEvBd,EFyBUD,EAAIC,GEvBd,CF2BiB,IAAI1E,GAAY4E,EEtBjCH,GFuBeI,IAAI,IAEXT,EAAE,YAAYI,IAAI,SEtB1B,OFuBQ9B,EAAK/B,WEtBb,IFwBQyD,EAAE,YAAYI,IAAI,SEtB1B,QFuBQ9B,EAAK/B,WEtBb,IF+BImE,IAAK,WACHtD,KAAKZ,aEtBX,GFwBImE,QAAS,WAEP,GAAIrC,GEtBVlB,IFwBM,IADAmC,QAAQC,IAAIlB,EEtBlBhC,OFuBwB,GAAdgC,EAAKhC,MEtBf,CFwBQsE,MAAMC,KEvBd,iBAEA,CFuBQ,GAAItC,IACFtC,MACEe,UAAWyB,aAAaC,QEtBpC,aFuBY7B,UAAW4B,aAAaC,QEtBpC,UFuBYoC,QAAS,EACTC,SAAUC,OAAO1C,EEtB7BhC,OFuBY2E,QEtBZ,EFuBYzC,OAAQC,aAAaC,QEtBjC,UFuBYU,YAAaX,aAAaC,QEpBtC,gBFuBQtB,MAAKuB,KAAKC,OACRL,OAAQA,EACRM,OAAQ,uBExBlBC,KAAA,SAAAC,GF0BU,GAAImC,GAAQnC,EEtBtBmC,MFuBcC,EAAYpC,EEtB1BoC,UFuBcC,EAAWrC,EEtBzBqC,SFuBcC,EAAWtC,EEtBzBuC,QFuBcC,EAAWxC,EEtBzBwC,SFuBcC,EAAUzC,EEtBxByC,OFuBUlD,GAAKpB,MAAQ6B,EEtBvB7B,MFyBUoB,EAAKmD,cAAcP,EAAOC,EAAWC,EAAUC,EAAUE,EEtBnEC,OF0BIC,cAAe,SAAuBP,EAAOC,EAAWC,EAAUC,EAAUE,EAAUC,GACpF,GAAIlD,GEtBVlB,IFuBMsE,gBEtBNC,OAAA,wBFuBQT,MAAOA,EACPC,UAAWA,EACXC,SAAUA,EACVE,QErBRD,EFsBQE,SAAUA,EACVC,QAASA,GE3BjB,SAAAzC,GF6B2B,8BAAfA,EAAI6C,SACNtD,EAAKuD,SAASvD,EEpBxBpB,UF8BI2E,SAAU,SAAkB3E,GAC1B,GAAIoB,GEnBVlB,KFoBU0E,EEnBV,GFoBUvD,GACFtC,MEfRiB,SFoBME,MAAKuB,KAAKC,OACRL,OAAQA,EACRM,OAAQ,4BErBhBC,KAAA,SAAAC,GFuBQ,GAAIgD,GAAYhD,EEnBxBgD,SFoBQxC,SAAQC,IEnBhBuC,GFoByB,KAAbA,GAEFD,EEnBV,QFoBUlB,MAAMC,KEnBhBiB,IFqBgC,KAAbC,GACTD,EEnBV,QFoBUlB,MAAMoB,QEnBhBF,GFoBUxD,EEnBV2D,gBFoBgC,KAAbF,GAAiC,KAAbA,IAC7BD,EEnBV,QFoBUlB,MAAMC,KEnBhBiB,OFyBIG,aAAc,WACZ,GAAIC,GEpBV9E,KFqBUmB,GACFtC,MACEe,UAAWyB,aAAaC,QEpBlC,aFqBUF,OAAQC,aAAaC,QEpB/B,UFqBUyD,SElBV,MFqBM/E,MAAKuB,KAAKC,OACRL,OAAQA,EACRM,OAAQ,2BEtBhBC,KAAA,SAAAC,GFwBQmD,EEpBR7E,UFuBImC,IAAK,SAAa4C,GAChB7C,QAAQC,IAAI4C,GEpBlB,WCxVAC,EAAA,WAA0B,GAAAC,GAAAlF,KAAamF,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBE,YAAA,iBAA2BF,EAAA,gBAAAA,EAAA,OAA+BE,YAAA,mBAA6BF,EAAA,aAAkBG,OAAOnG,SAAA6F,EAAA7F,SAAAP,MAAAoG,EAAApG,SAA2CoG,EAAAO,GAAA,KAAAJ,EAAA,OAAwBE,YAAA,gBAAAG,IAAgCzE,UAAA,SAAA0E,GAA6BT,EAAAjE,UAAA0E,IAAsBpF,OAAA,SAAAoF,GAA2BT,EAAA3E,OAAAoF,OAAqBN,EAAA,OAAYE,YAAA,kBAAAC,OAAqCI,GAAA,aAAgBP,EAAA,OAAAH,EAAAW,GAAAX,EAAA,kBAAAhD,EAAAS,GAAmD,MAAA0C,GAAA,aAAuBS,IAAA5D,EAAA6D,KAAAP,OAAqB7C,KAAMqD,UAAWC,MAAA,SAAAN,GAAyBT,EAAAjD,OAAAC,OAAmBmD,EAAA,OAAYE,YAAA,eAAyBL,EAAAO,GAAA,KAAAJ,EAAA,OAAwBE,YAAA,iBAA2BF,EAAA,OAAYE,YAAA,mBAA6BF,EAAA,OAAYE,YAAA,eAAyBF,EAAA,QAAAH,EAAAO,GAAAP,EAAAgB,GAAAhE,EAAAiE,aAAAjB,EAAAO,GAAA,6BAAAJ,EAAA,QAAAH,EAAAO,GAAAP,EAAAgB,GAAAhE,EAAAI,WAAA4C,EAAAO,GAAA,6BAAAP,EAAAO,GAAA,KAAAJ,EAAA,OAAoLE,YAAA,eAAyBF,EAAA,QAAAH,EAAAO,GAAA,cAAAP,EAAAO,GAAA,KAAAJ,EAAA,OAAwDE,YAAA,mBAA6BF,EAAA,OAAYE,YAAA,eAAyBF,EAAA,QAAae,aAAaC,gBAAA,cAA4BnB,EAAAO,GAAAP,EAAAgB,GAAAhE,EAAAoE,kBAAApB,EAAAO,GAAA,KAAAJ,EAAA,OAA6DE,YAAA,eAAyBF,EAAA,QAAaE,YAAA,YAAAa,aAAqCG,YAAA,UAAoBrB,EAAAO,GAAAP,EAAAgB,GAAAhE,EAAAa,SAAA,aAAAmC,EAAAO,GAAA,KAAAJ,EAAA,OAAiEE,YAAA,cAAAG,IAA8BO,MAAA,SAAAN,GAAyBT,EAAAxC,UAAAC,EAAAT,OAAwBmD,EAAA,SAAcE,YAAA,WAAAC,OAA8BgB,KAAA,WAAAC,KAAA,OAAAnI,MAAA,IAAAsH,GAAA,WAAAjD,aAAqE,GAAAuC,EAAAO,GAAA,KAAAJ,EAAA,OAA6BE,YAAA,WAAqBL,EAAAO,GAAA,KAAAP,EAAA,UAAAG,EAAA,OAAwCE,YAAA,sBAAgCF,EAAA,OAAYE,YAAA,YAAsBF,EAAA,YAAiBG,OAAOkB,KAAA,SAAeV,UAAWC,MAAA,SAAAN,GAAyBT,EAAA5B,IAAAqC,OAAkBT,EAAAO,GAAA,SAAAP,EAAAgB,GAAAhB,EAAAhG,OAAA,aAAAgG,EAAAyB,KAAAzB,EAAAO,GAAA,KAAAJ,EAAA,cAAuFG,OAAO1G,MAAA,UAAAoG,EAAAhG,MAAA0H,qBAAA,IAAoDlB,IAAKmB,QAAA,SAAAlB,GAA2BT,EAAA3B,YAAeuD,OAAQxI,MAAA4G,EAAA,YAAA6B,SAAA,SAAAC,GAAiD9B,EAAA9F,YAAA4H,GAAoBC,WAAA,kBAA2B,cAC/lEC,KACAC,GAAiBlC,SAAAiC,mBACjBE,EAAA,EFAAC,EAAApJ,EAAA,QAQAqJ,EAAApJ,EAKAqJ,EAAAF,EACA1I,EACAyI,GATA,EAWAE,EAPA,kBAEA,KAUAtJ,GAAA,QAAAuJ,EAAA,SD2XMC,KACA,SAAUzJ,EAAQ0J,EAASxJ,GIrZjCwJ,EAAA1J,EAAA0J,QAAAxJ,EAAA,YAAAyJ,IAKAD,EAAAjF,MAAAzE,EAAA4E,EAAA,6nFAAuoF1E,EAAA,4nEAA2rE,MJ8Z5zJ0J,OACA,SAAU5J,EAAQ0J,EAASxJ,GKjajC,GAAA2J,GAAA3J,EAAA,OACA,iBAAA2J,SAAA7J,EAAA4E,EAAAiF,EAAA,MACAA,EAAAC,SAAA9J,EAAA0J,QAAAG,EAAAC,OAEA5J,GAAA,mBAAA2J,GAAA","file":"static/js/34.8e9f7421f2ac64131130.js","sourcesContent":["webpackJsonp([34],{\n\n/***/ \"Lsel\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/set.js\nvar set = __webpack_require__(\"lHA8\");\nvar set_default = /*#__PURE__*/__webpack_require__.n(set);\n\n// EXTERNAL MODULE: ./src/comments/headerTwo.vue + 2 modules\nvar headerTwo = __webpack_require__(\"j8VX\");\n\n// EXTERNAL MODULE: ./node_modules/vant/es/index.js + 137 modules\nvar es = __webpack_require__(\"Fd2+\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/project/mywater/waterquery/pages/moreAccount.vue\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var moreAccount = ({\n  components: {\n    headerTwo: headerTwo[\"a\" /* default */]\n  },\n  data: function data() {\n    return {\n      title: '账户多水表',\n      //上拉刷新\n      isLoading: false,\n      scrollTop: 0, //滚动条隔顶部的距离\n\n      checked: [],\n      count: 0,\n      isShowBtn: false,\n      isShowPrice: false,\n      showData: {\n        isShowUL: false,\n        isShowLink: false, //是否显示链接\n        isShowBtn: true, //是否显示按钮\n        ctmName: \"\",\n        accountNo: \"\",\n        accountBalance: '',\n        ctmNo: '',\n        groupCode: \"\"\n      },\n      needData: [],\n      order: ''\n    };\n  },\n  mounted: function mounted() {\n    this.init();\n  },\n\n  methods: {\n    onRefresh: function onRefresh() {\n      var _this2 = this;\n\n      //上拉刷新\n      setTimeout(function () {\n        _this2.$toast('刷新成功');\n        _this2.isLoading = false;\n        _this2.init();\n      }, 500);\n    },\n    scroll: function scroll(e) {\n      if (parseInt(e.target.clientHeight) + Math.ceil(e.target.scrollTop) === parseInt(e.target.scrollHeight)) {\n        // console.log(\"到底\")\n      } else if (e.target.scrollTop == 0) {\n        // console.log(\"到顶\")\n        e.stopPropagation();\n      }\n      // this.scrollTop = e.target.scrollTop;\n      this.$set(this, 'scrollTop', e.target.scrollTop);\n    },\n    touchmove: function touchmove(e) {\n      if (this.scrollTop !== 0) {\n        e.stopPropagation(); //阻止冒泡\n      }\n    },\n    init: function init() {\n      // this.showData.userNo = this.$route.query.userNo;\n      // this.showData.groupCode = this.$route.query.groupCode;\n      var that = this;\n      var params = { //接口入参\n        \"data\": {\n          openId: localStorage.getItem('openId'),\n          groupCode: localStorage.getItem('groupCode'),\n          accountNo: localStorage.getItem('accNo')\n        }\n      };\n      this.$api.fetch({\n        params: params, //参数\n        apiUrl: '/myWater/accUserList' //接口地址\n      }).then(function (res) {\n        that.needData = res.list;\n        that.showData.accountBalance = res.accountBalance;\n        that.showData.accountNo = res.accountNo;\n        that.showData.ctmName = res.ctmName;\n        that.showData.ctmNo = res.ctmNo;\n        that.showData.groupCode = that.$route.query.groupCode;\n        localStorage.setItem('groupOpenId', res.groupOpenId);\n      });\n    },\n    goBill: function goBill(item) {\n      console.log(item);\n      event.stopPropagation();\n      item.groupCode = this.$route.query.groupCode;\n      localStorage.setItem('groupCode', item.groupCode);\n      localStorage.setItem('userNo', item.userNo);\n      // console.log(item);\n      this.$router.push({ path: '/bill', query: item });\n    },\n    takeChage: function takeChage(i, item) {\n      event.stopPropagation();\n      var that = this;\n      // that.isShowBtn = true;\n      // $('#kr-list').css(\"height\",'87%')\n      if ($('#checkbox' + i).is(\":checked\")) {\n        that.count += parseFloat(item.arrears);\n      } else {\n        that.count -= parseFloat(item.arrears);\n      }\n      if (that.count == 0) {\n        $('#kr-list').css(\"height\", '100%');\n        that.isShowBtn = false;\n        return;\n      }\n      var num = [];\n      for (var j = 0; j < that.needData.length; j++) {\n        if ($('#checkbox' + j).is(\":checked\")) {\n          num[j] = 1;\n        } else {\n          num[j] = 0;\n        }\n      }\n\n      var temp = new set_default.a(num);\n      if (temp.has(1)) {\n        // &&that.count !== 0\n        $('#kr-list').css(\"height\", '85%');\n        that.isShowBtn = true;\n      } else {\n        $('#kr-list').css(\"height\", '100%');\n        that.isShowBtn = false;\n      }\n\n      // console.log(that.count);\n      // that.count -= parseInt(that.showData.pirce);\n      // if(that.count<0){\n      //   that.count = 0;\n      // }\n    },\n    pay: function pay() {\n      this.isShowPrice = true;\n    },\n    comfirm: function comfirm() {\n      // console.log(this.count);\n      var that = this;\n      console.log(that.count);\n      if (that.count == 0) {\n        var message = '充值金额不能为零！';\n        Toast.fail(message);\n      } else {\n        var params = { //接口入参\n          data: {\n            groupCode: localStorage.getItem('groupCode'),\n            accountNo: localStorage.getItem('userNo'),\n            payType: 1, //1 微信直接支付 2 扫码支付\n            payMoney: Number(that.count),\n            feeType: 1,\n            openId: localStorage.getItem('openId'),\n            groupOpenId: localStorage.getItem('groupOpenId')\n          }\n        };\n        this.$api.fetch({\n          params: params, //参数\n          apiUrl: '/myWater/wechatPay' //接口地址\n        }).then(function (res) {\n          var appId = res.appId;\n          var timeStamp = res.timeStamp;\n          var nonceStr = res.nonceStr;\n          var _package = res.package;\n          var signType = res.signType;\n          var paySign = res.paySign;\n          that.order = res.order;\n          // let url = that.$api.getUrl();\n          // history.pushState(null, null, url + '/?')\n          that.onBridgeReady(appId, timeStamp, nonceStr, _package, signType, paySign);\n        });\n      }\n    },\n    onBridgeReady: function onBridgeReady(appId, timeStamp, nonceStr, _package, signType, paySign) {\n      var that = this;\n      WeixinJSBridge.invoke('getBrandWCPayRequest', {\n        appId: appId, //公众号名称，由商户传入     \n        timeStamp: timeStamp, //时间戳，自1970年以来的秒数     \n        nonceStr: nonceStr, //随机串     \n        package: _package,\n        signType: signType, //微信签名方式：     \n        paySign: paySign //微信签名 \n      }, function (res) {\n        if (res.err_msg == \"get_brand_wcpay_request:ok\") {\n          that.getOrder(that.order);\n          // 使用以上方式判断前端返回,微信团队郑重提示：\n          //res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。\n        }\n        // else{\n        //   let message = '支付失败！';\n        //   Toast.fail(message);\n        // }\n      });\n    },\n    getOrder: function getOrder(order) {\n      var that = this;\n      var message = '';\n      var params = { //接口入参\n        data: {\n          // order:\"5dce0850d4b2155d7c3eeead\",\n          order: order\n        }\n      };\n      this.$api.fetch({\n        params: params, //参数\n        apiUrl: '/myWater/payResultQuery' //接口地址\n      }).then(function (res) {\n        var payStatus = res.payStatus;\n        console.log(payStatus);\n        if (payStatus == '1') {\n          // message = '正在处理中，请稍后再试。';\n          message = '交易失败！';\n          Toast.fail(message);\n          // that.getOrder(that.order)\n        } else if (payStatus == '2') {\n          message = '支付成功！';\n          Toast.success(message);\n          that.moduleAccess();\n        } else if (payStatus == '3' || payStatus == '4') {\n          message = '交易失败！';\n          Toast.fail(message);\n        }\n      });\n    },\n\n    // 模块访问\n    moduleAccess: function moduleAccess() {\n      var _this = this;\n      var params = { //接口入参\n        \"data\": {\n          groupCode: localStorage.getItem('groupCode'),\n          openId: localStorage.getItem('openId'),\n          moduleId: '13'\n        }\n      };\n      this.$api.fetch({\n        params: params, //参数\n        apiUrl: '/common/moduleVisitAdd' //接口地址\n      }).then(function (res) {\n        _this.init();\n      });\n    },\n    log: function log(m) {\n      console.log(m || 'log');\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e9a37eea\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/project/mywater/waterquery/pages/moreAccount.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"more-account\"},[_c('page-content',[_c('div',{staticClass:\"content-padded\"},[_c('headerTwo',{attrs:{\"showData\":_vm.showData,\"title\":_vm.title}}),_vm._v(\" \"),_c('div',{staticClass:\"row kr-buttom\",on:{\"touchmove\":function($event){_vm.touchmove($event)},\"scroll\":function($event){_vm.scroll($event)}}},[_c('div',{staticClass:\"col-100 kr-list\",attrs:{\"id\":\"kr-list\"}},[_c('list',_vm._l((_vm.needData),function(item,i){return _c('list-item',{key:item.code,attrs:{\"i\":i},nativeOn:{\"click\":function($event){_vm.goBill(item)}}},[_c('div',{staticClass:\"item-media\"}),_vm._v(\" \"),_c('div',{staticClass:\"item-content\"},[_c('div',{staticClass:\"item-title-row\"},[_c('div',{staticClass:\"item-title\"},[_c('span',[_vm._v(_vm._s(item.userName))]),_vm._v(\"\\n                      (\"),_c('span',[_vm._v(_vm._s(item.userNo))]),_vm._v(\")\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"item-title\"},[_c('span',[_vm._v(\"欠费金额\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"item-title-row\"},[_c('div',{staticClass:\"item-title\"},[_c('span',{staticStyle:{\"text-overflow\":\"ellipsis\"}},[_vm._v(_vm._s(item.userAddress))])]),_vm._v(\" \"),_c('div',{staticClass:\"item-title\"},[_c('span',{staticClass:\"total_num\",staticStyle:{\"font-size\":\"25px\"}},[_vm._v(_vm._s(item.arrears)+\"元\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"kr-checkbox\",on:{\"click\":function($event){_vm.takeChage(i,item)}}},[_c('input',{staticClass:\"checkbox\",attrs:{\"type\":\"checkbox\",\"name\":\"name\",\"value\":\"A\",\"id\":'checkbox'+i}})])])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"kr-div\"}),_vm._v(\" \"),(_vm.isShowBtn)?_c('div',{staticClass:\"row content-block\"},[_c('div',{staticClass:\"col-100\"},[_c('m-button',{attrs:{\"size\":\"large\"},nativeOn:{\"click\":function($event){_vm.pay($event)}}},[_vm._v(\"确认支付（￥\"+_vm._s(_vm.count)+\"）\")])],1)]):_vm._e(),_vm._v(\" \"),_c('van-dialog',{attrs:{\"title\":'确认支付金额￥'+_vm.count,\"show-cancel-button\":\"\"},on:{\"confirm\":function($event){_vm.comfirm()}},model:{value:(_vm.isShowPrice),callback:function ($$v) {_vm.isShowPrice=$$v},expression:\"isShowPrice\"}})],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var pages_moreAccount = (esExports);\n// CONCATENATED MODULE: ./src/project/mywater/waterquery/pages/moreAccount.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"b+wz\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e9a37eea\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  moreAccount,\n  pages_moreAccount,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var waterquery_pages_moreAccount = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"TZ1l\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".more-account[data-v-e9a37eea]{height:100%}.more-account .kr-buttom #kr-list .van-row[data-v-e9a37eea]{padding:1%;border-bottom:1px solid #888}.more-account .kr-buttom #kr-list .van-row .van-col[data-v-e9a37eea]{height:100%}.more-account .kr-buttom #kr-list .van-row .van-col .item-title-span[data-v-e9a37eea]{padding:3% 0 0;height:100%;width:100%}.more-account .kr-buttom #kr-list .van-row .van-col .item-title-span .kr-span[data-v-e9a37eea]{display:inline-block;height:100%;line-height:100%;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.more-account .kr-buttom #kr-list .van-row .van-col .item-title[data-v-e9a37eea]{font-weight:300}.more-account .kr-buttom #kr-list .van-row .kr-checkbox[data-v-e9a37eea]{padding:4% 0 0}.more-account .kr-buttom #kr-list .van-row .kr-checkbox input[type=checkbox]+label[data-v-e9a37eea]{display:block;width:30px;height:30px;border-radius:50%;cursor:pointer;border:1px solid red}.more-account .kr-buttom #kr-list .van-row .kr-checkbox input[type=checkbox]:checked+label[data-v-e9a37eea]:before{display:block;content:\\\"\\\\2714\\\";text-align:center;font-size:20px;color:red}.more-account .kr-buttom #kr-list .van-row .kr-checkbox input[type=checkbox][data-v-e9a37eea]{width:30px;height:30px}.more-account .page-content .content-padded[data-v-e9a37eea],.more-account .page-content[data-v-e9a37eea]{height:100%}.more-account .page-content .content-padded .kr-buttom[data-v-e9a37eea]{height:70%}.more-account .page-content .content-padded .kr-buttom .kr-list[data-v-e9a37eea]{height:85%;height:100%;overflow-y:auto;width:100%}.more-account .page-content .content-padded .kr-buttom .kr-list .item-content[data-v-e9a37eea]{margin-left:0;padding-right:0;width:88%}.more-account .page-content .content-padded .kr-buttom .kr-list .kr-checkbox[data-v-e9a37eea]{width:6%;padding:10% 0}.more-account .page-content .content-padded .kr-buttom .kr-list .kr-checkbox .checkbox[data-v-e9a37eea]{width:100%;height:100%;border-radius:50%;display:inline-block}.more-account .page-content .content-padded .kr-buttom .content-block[data-v-e9a37eea]{height:13%;padding:2% 0 0 4%}.more-account .pay_box[data-v-e9a37eea]{padding:1%;text-align:right;margin-top:142%}.more-account .pay_box a[data-v-e9a37eea]{display:inline-block;color:#1e1f6a;font-weight:bolder}.more-account .pay_box a .button[data-v-e9a37eea]{border-radius:.2rem!important;font-weight:600}.more-account .icon[data-v-e9a37eea]{width:38px;height:38px;position:absolute;right:.5rem}.more-account .content-padded[data-v-e9a37eea]{margin:0}.more-account .list .item-subtitle[data-v-e9a37eea]{font-size:14px}.more-account .img_content[data-v-e9a37eea]{height:10rem;width:100%;background:url(\" + __webpack_require__(\"vR/c\") + \") no-repeat;background-size:100% 100%;margin-left:0}.more-account .total_num[data-v-e9a37eea]{font-weight:bolder;font-size:20px}.more-account .content-block .col-100[data-v-e9a37eea]{text-align:center}.more-account .content-block a[data-v-e9a37eea]{height:2rem;line-height:2rem;width:60%}.more-account .list[data-v-e9a37eea]{margin:0}.more-account .content-block a[data-v-e9a37eea]{font-size:.9rem;height:2.7rem;line-height:2.7rem;width:92%;display:inline-block;border-radius:4px;background:#479eff}.more-account .item-title-row[data-v-e9a37eea]{font-size:15px;width:95%}.more-account .col-100 .user-card[data-v-e9a37eea]{border-radius:10px;padding-top:3px;font-weight:100}.more-account .col-100 .user-card[data-v-e9a37eea]:after{display:block;width:100%;height:100%;content:\\\"\\\"}.more-account .col-100 .user-card .card-header .img[data-v-e9a37eea]{float:left}.more-account .col-100 .user-card .card-header a[data-v-e9a37eea]{float:right;color:#fff}.more-account .col-100 .user-card .card-header a b[data-v-e9a37eea]{font-size:16px;font-weight:400;text-decoration:underline}.more-account .col-100 .user-card .card-content[data-v-e9a37eea]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.more-account .col-100 .user-card .card-content .kr-ul[data-v-e9a37eea]{margin-top:6%;width:100%}.more-account .col-100 .user-card .card-content .kr-ul li[data-v-e9a37eea]{color:#fff;padding:1.5% 1%;font-weight:300;font-size:14px}.more-account .col-100 .user-card .card-content .kr-ul li b[data-v-e9a37eea]{font-weight:300}.more-account .col-100 .user-card .card-content .kr-ul li a[data-v-e9a37eea]{display:inline-block;color:#3193f6;float:right}.more-account .col-100 .money-select[data-v-e9a37eea]{margin:.5rem}.more-account .col-100 .money-select[data-v-e9a37eea]:after{content:\\\"020\\\";display:block;height:0;clear:both;visibility:hidden}.more-account .col-100 .money-select li[data-v-e9a37eea]{float:left;width:27%;height:2rem;line-height:2rem;text-align:center;margin:3%;background:#e7e7e7;border-radius:6px}.more-account .col-100 p[data-v-e9a37eea]{text-align:center;margin:.5rem}.more-account .col-100 h3[data-v-e9a37eea]{padding:.5rem}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"b+wz\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"TZ1l\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"po5z\")(\"6e53d27a\", content, true);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/34.8e9f7421f2ac64131130.js","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e9a37eea\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./moreAccount.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./moreAccount.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e9a37eea\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./moreAccount.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e9a37eea\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/project/mywater/waterquery/pages/moreAccount.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"more-account\">\r\n    <!-- <page-header>\r\n      <header-link :left=\"true\" :edge=\"true\" v-back-link>\r\n        <icon icon=\"back\"></icon>返回\r\n      </header-link>\r\n      <header-title>账户多水表</header-title>\r\n    </page-header> -->\r\n    <page-content>\r\n      <div class=\"content-padded\">\r\n        <!-- <van-pull-refresh @refresh=\"onRefresh\" v-model=\"isLoading\"> -->\r\n          <headerTwo :showData=\"showData\" :title=\"title\"></headerTwo>\r\n          <div class=\"row kr-buttom\" @touchmove=\"touchmove($event)\" @scroll=\"scroll($event)\">\r\n            <div class=\"col-100 kr-list\" id=\"kr-list\">\r\n              <list>\r\n                <!-- :checkbox=\"true\" -->\r\n                <list-item @click.native=\"goBill(item)\" v-for=\"(item,i) in needData\" :i=\"i\" :key=\"item.code\">\r\n\r\n                  <div class=\"item-media\">\r\n\r\n                  </div>\r\n                  <div class=\"item-content\">\r\n                    <div class=\"item-title-row\">\r\n                      <div class=\"item-title\">\r\n                        <span>{{item.userName}}</span>\r\n                        (<span>{{item.userNo}}</span>)\r\n                      </div>\r\n                      <div class=\"item-title\">\r\n                        <span>欠费金额</span>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"item-title-row\">\r\n                      <div class=\"item-title\">\r\n                        <span style=\"text-overflow:ellipsis;\">{{item.userAddress}}</span>\r\n                      </div>\r\n                      <div class=\"item-title\">\r\n                        <span class=\"total_num\" style=\"font-size:25px;\">{{item.arrears}}元</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"kr-checkbox\" @click=\"takeChage(i,item)\">\r\n                    <input class=\"checkbox\" type=\"checkbox\" name=\"name\" value=\"A\" :id=\"'checkbox'+i\" />\r\n                  </div>\r\n                </list-item>\r\n              </list>\r\n              <!-- <van-row \r\n                    @click=\"goBill(item)\" \r\n                    v-for=\"(item,i) in needData\" \r\n                    :i=\"i\" \r\n                    :key=\"item.code\">\r\n              <van-col span=\"14\" style=\"padding:0 1% 0 0;\">\r\n                <div class=\"item-title\">\r\n                  <span>{{item.userName}}</span>\r\n                  (<span>{{item.userNo}}</span>)\r\n                </div>\r\n                <div class=\"item-title-span item-title\">\r\n                  <span class=\"kr-span\">{{item.userAddress}}</span>\r\n                </div>\r\n              </van-col>\r\n              <van-col span=\"8\">\r\n                <div class=\"item-title\">\r\n                  <span>欠费金额</span>\r\n                </div>\r\n                <div class=\"item-title\">\r\n                  <span class=\"total_num\" style=\"font-size:25px;\">{{item.arrears}}元</span>\r\n                </div>\r\n              </van-col>\r\n              <van-col span=\"2\" class=\"kr-checkbox\" @click=\"takeChage(i,item)\">\r\n                <van-checkbox \r\n                            v-model=\"checked[i]\"\r\n                            checked-color=\"#07c160\"\r\n                            @click=\"takeChage(i,item)\" \r\n                            :id=\"'checkbox'+i\">\r\n                </van-checkbox>\r\n                <input \r\n                      class=\"checkbox\"\r\n                      type=\"checkbox\" \r\n                      name=\"color-input-red\" \r\n                      value=\"#f0544d\"\r\n                      :id=\"'checkbox'+i\"/>\r\n                <label for=\"color-input-red\"></label>\r\n              </van-col>\r\n            </van-row> -->\r\n            </div>\r\n            <div class=\"kr-div\"></div>\r\n            <div class=\"row content-block\" v-if=\"isShowBtn\">\r\n              <div class=\"col-100\">\r\n                <m-button size=\"large\" @click.native=\"pay\">确认支付（￥{{count}}）</m-button>\r\n              </div>\r\n            </div>\r\n            <van-dialog v-model=\"isShowPrice\" :title=\"'确认支付金额￥'+count\" show-cancel-button @confirm=\"comfirm()\">\r\n            </van-dialog>\r\n          </div>\r\n        <!-- </van-pull-refresh> -->\r\n      </div>\r\n\r\n    </page-content>\r\n  </div>\r\n</template>\r\n<script>\r\nimport headerTwo from '@/comments/headerTwo';\r\nimport { Dialog } from 'vant';\r\nimport { Row, Col } from 'vant'\r\nexport default {\r\n  components: {\r\n    headerTwo\r\n  },\r\n  data() {\r\n    return {\r\n      title:'账户多水表',\r\n      //上拉刷新\r\n      isLoading: false,\r\n      scrollTop:0,//滚动条隔顶部的距离\r\n\r\n      checked: [],\r\n      count: 0,\r\n      isShowBtn: false,\r\n      isShowPrice: false,\r\n      showData: {\r\n        isShowUL: false,\r\n        isShowLink: false,//是否显示链接\r\n        isShowBtn: true,//是否显示按钮\r\n        ctmName: \"\",\r\n        accountNo: \"\",\r\n        accountBalance: '',\r\n        ctmNo: '',\r\n        groupCode: \"\",\r\n      },\r\n      needData: [],\r\n      order: '',\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    onRefresh() {//上拉刷新\r\n      setTimeout(() => {\r\n        this.$toast('刷新成功');\r\n        this.isLoading = false;\r\n        this.init();\r\n      }, 500);\r\n    },\r\n    scroll(e) {\r\n      if ((parseInt(e.target.clientHeight) + Math.ceil(e.target.scrollTop)) === parseInt(e.target.scrollHeight)) {\r\n        // console.log(\"到底\")\r\n      } else if (e.target.scrollTop == 0) {\r\n        // console.log(\"到顶\")\r\n        e.stopPropagation()\r\n      }\r\n      // this.scrollTop = e.target.scrollTop;\r\n      this.$set(this,'scrollTop',e.target.scrollTop)\r\n    },\r\n    touchmove(e) {\r\n      if(this.scrollTop !== 0){\r\n        e.stopPropagation()//阻止冒泡\r\n      }\r\n    },\r\n    init() {\r\n      // this.showData.userNo = this.$route.query.userNo;\r\n      // this.showData.groupCode = this.$route.query.groupCode;\r\n      let that = this;\r\n      let params = {//接口入参\r\n        \"data\": {\r\n          openId: localStorage.getItem('openId'),\r\n          groupCode: localStorage.getItem('groupCode'),\r\n          accountNo: localStorage.getItem('accNo')\r\n        }\r\n      }\r\n      this.$api.fetch({\r\n        params,//参数\r\n        apiUrl: '/myWater/accUserList',//接口地址\r\n      }).then(res => {\r\n        that.needData = res.list;\r\n        that.showData.accountBalance = res.accountBalance;\r\n        that.showData.accountNo = res.accountNo;\r\n        that.showData.ctmName = res.ctmName;\r\n        that.showData.ctmNo = res.ctmNo;\r\n        that.showData.groupCode = that.$route.query.groupCode;\r\n        localStorage.setItem('groupOpenId', res.groupOpenId);\r\n      })\r\n    },\r\n    goBill(item) {\r\n      console.log(item);\r\n      event.stopPropagation();\r\n      item.groupCode = this.$route.query.groupCode;\r\n      localStorage.setItem('groupCode', item.groupCode);\r\n      localStorage.setItem('userNo', item.userNo)\r\n      // console.log(item);\r\n      this.$router.push({ path: '/bill', query: item })\r\n    },\r\n    takeChage(i, item) {\r\n      event.stopPropagation();\r\n      let that = this;\r\n      // that.isShowBtn = true;\r\n      // $('#kr-list').css(\"height\",'87%')\r\n      if ($('#checkbox' + i).is(\":checked\")) {\r\n        that.count += parseFloat(item.arrears);\r\n      } else {\r\n        that.count -= parseFloat(item.arrears)\r\n      }\r\n      if (that.count == 0) {\r\n        $('#kr-list').css(\"height\", '100%')\r\n        that.isShowBtn = false;\r\n        return\r\n      }\r\n      let num = [];\r\n      for (let j = 0; j < that.needData.length; j++) {\r\n        if ($('#checkbox' + j).is(\":checked\")) {\r\n          num[j] = 1;\r\n        } else {\r\n          num[j] = 0;\r\n        }\r\n\r\n      }\r\n\r\n      let temp = new Set(num);\r\n      if (temp.has(1)) {\r\n        // &&that.count !== 0\r\n        $('#kr-list').css(\"height\", '85%')\r\n        that.isShowBtn = true;\r\n      } else {\r\n        $('#kr-list').css(\"height\", '100%')\r\n        that.isShowBtn = false;\r\n      }\r\n\r\n      // console.log(that.count);\r\n      // that.count -= parseInt(that.showData.pirce);\r\n      // if(that.count<0){\r\n      //   that.count = 0;\r\n      // }\r\n    },\r\n    pay() {\r\n      this.isShowPrice = true;\r\n    },\r\n    comfirm() {\r\n      // console.log(this.count);\r\n      let that = this;\r\n      console.log(that.count);\r\n      if (that.count == 0) {\r\n        let message = '充值金额不能为零！';\r\n        Toast.fail(message);\r\n      } else {\r\n        let params = {//接口入参\r\n          data: {\r\n            groupCode: localStorage.getItem('groupCode'),\r\n            accountNo: localStorage.getItem('userNo'),\r\n            payType: 1,//1 微信直接支付 2 扫码支付\r\n            payMoney: Number(that.count),\r\n            feeType: 1,\r\n            openId: localStorage.getItem('openId'),\r\n            groupOpenId: localStorage.getItem('groupOpenId')\r\n          }\r\n        }\r\n        this.$api.fetch({\r\n          params,//参数\r\n          apiUrl: '/myWater/wechatPay',//接口地址\r\n        }).then(res => {\r\n          let appId = res.appId;\r\n          let timeStamp = res.timeStamp;\r\n          let nonceStr = res.nonceStr;\r\n          let _package = res.package;\r\n          let signType = res.signType;\r\n          let paySign = res.paySign;\r\n          that.order = res.order;\r\n          // let url = that.$api.getUrl();\r\n          // history.pushState(null, null, url + '/?')\r\n          that.onBridgeReady(appId, timeStamp, nonceStr, _package, signType, paySign)\r\n        })\r\n      }\r\n    },\r\n    onBridgeReady(appId, timeStamp, nonceStr, _package, signType, paySign) {\r\n      let that = this;\r\n      WeixinJSBridge.invoke(\r\n        'getBrandWCPayRequest', {\r\n          appId,     //公众号名称，由商户传入     \r\n          timeStamp,         //时间戳，自1970年以来的秒数     \r\n          nonceStr, //随机串     \r\n          package: _package,\r\n          signType,         //微信签名方式：     \r\n          paySign, //微信签名 \r\n        },\r\n        function (res) {\r\n          if (res.err_msg == \"get_brand_wcpay_request:ok\") {\r\n            that.getOrder(that.order)\r\n            // 使用以上方式判断前端返回,微信团队郑重提示：\r\n            //res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。\r\n          }\r\n          // else{\r\n          //   let message = '支付失败！';\r\n          //   Toast.fail(message);\r\n          // }\r\n        }\r\n      );\r\n    },\r\n    getOrder(order) {\r\n      let that = this;\r\n      let message = '';\r\n      let params = {//接口入参\r\n        data: {\r\n          // order:\"5dce0850d4b2155d7c3eeead\",\r\n          order\r\n        }\r\n      }\r\n      this.$api.fetch({\r\n        params,//参数\r\n        apiUrl: '/myWater/payResultQuery',//接口地址\r\n      }).then(res => {\r\n        let payStatus = res.payStatus;\r\n        console.log(payStatus);\r\n        if (payStatus == '1') {\r\n          // message = '正在处理中，请稍后再试。';\r\n          message = '交易失败！';\r\n          Toast.fail(message);\r\n          // that.getOrder(that.order)\r\n        } else if (payStatus == '2') {\r\n          message = '支付成功！';\r\n          Toast.success(message);\r\n          that.moduleAccess();\r\n        } else if (payStatus == '3' || payStatus == '4') {\r\n          message = '交易失败！';\r\n          Toast.fail(message);\r\n        }\r\n      })\r\n    },\r\n    // 模块访问\r\n    moduleAccess() {\r\n      var _this = this;\r\n      let params = {//接口入参\r\n        \"data\": {\r\n          groupCode: localStorage.getItem('groupCode'),\r\n          openId: localStorage.getItem('openId'),\r\n          moduleId: '13',\r\n        },\r\n      }\r\n      this.$api.fetch({\r\n        params,//参数\r\n        apiUrl: '/common/moduleVisitAdd',//接口地址\r\n      }).then(res => {\r\n        _this.init()\r\n      })\r\n    },\r\n    log(m) {\r\n      console.log(m || 'log')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.more-account {\r\n  height: 100%;\r\n  .kr-buttom {\r\n    // padding:2%;\r\n    #kr-list {\r\n      // box-shadow: 1px 1px 5px 1px #888;\r\n      .van-row {\r\n        padding: 1%;\r\n        border-bottom: 1px solid #888;\r\n        .van-col {\r\n          height: 100%;\r\n          .item-title-span {\r\n            padding: 3% 0 0 0;\r\n            height: 100%;\r\n            width: 100%;\r\n            .kr-span {\r\n              display: inline-block;\r\n              height: 100%;\r\n              line-height: 100%;\r\n              width: 100%;\r\n              white-space: nowrap;\r\n              text-overflow: ellipsis;\r\n              overflow: hidden;\r\n            }\r\n          }\r\n          .item-title {\r\n            // font-family: PingFang_Regular;\r\n            font-weight: 300;\r\n          }\r\n        }\r\n        .kr-checkbox {\r\n          padding: 4% 0 0 0;\r\n          input[type=\"checkbox\"] + label {\r\n            display: block;\r\n            width: 30px;\r\n            height: 30px;\r\n            border-radius: 50%;\r\n            cursor: pointer;\r\n            // position: absolute;\r\n            // background: rgba(240, 84, 77, 1);\r\n            border: 1px solid red;\r\n          }\r\n          input[type=\"checkbox\"]:checked + label::before {\r\n            display: block;\r\n            content: \"\\2714\";\r\n            text-align: center;\r\n            font-size: 20px;\r\n            color: red;\r\n          }\r\n\r\n          input[type=\"checkbox\"] {\r\n            width: 30px;\r\n            height: 30px;\r\n            // visibility: hidden;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  #kr-list {\r\n    // padding:2%;\r\n    // .kr-list-div{\r\n    //   box-shadow: 1px 1px 5px 1px #888;\r\n    //   .kr-body{\r\n    //     .kr-list-body{\r\n    //       border-bottom:1px solid #888;\r\n    //       display: flex;\r\n    //       width: 100%;\r\n    //       padding:1%;\r\n    //       .kr-list-right{\r\n    //         width: 64%;\r\n    //         // .item-title{\r\n    //         //   display: inline-block;\r\n    //         // }\r\n    //       }\r\n    //       .kr-list-middle{\r\n    //         width: 28%;\r\n    //         // .item-title{\r\n    //         //   display: inline-block;\r\n    //         // }\r\n    //       }\r\n    //       .kr-list-left{\r\n    //         width: 8%;\r\n    //       }\r\n    //     }\r\n    //   }\r\n    // }\r\n  }\r\n  .page-content {\r\n    height: 100%;\r\n    .content-padded {\r\n      height: 100%;\r\n      .kr-buttom {\r\n        height: 70%;\r\n        // overflow-y:auto;\r\n        .kr-list {\r\n          height: 85%;\r\n          height: 100%;\r\n          overflow-y: auto;\r\n          width: 100%;\r\n          .item-content {\r\n            margin-left: 0;\r\n            padding-right: 0;\r\n            width: 88%;\r\n          }\r\n          .kr-checkbox {\r\n            width: 6%;\r\n            padding: 10% 0%;\r\n            .checkbox {\r\n              width: 100%;\r\n              height: 100%;\r\n              border-radius: 50%;\r\n              display: inline-block;\r\n            }\r\n          }\r\n        }\r\n        .kr-div {\r\n          // height: 2%;\r\n        }\r\n        .content-block {\r\n          height: 13%;\r\n          padding: 2% 0 0 4%;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .pay_box {\r\n    // padding: 6px;\r\n    padding: 1%;\r\n    text-align: right;\r\n    margin-top: 142%;\r\n    a {\r\n      display: inline-block;\r\n      color: #1e1f6a;\r\n      font-weight: bolder;\r\n      .button {\r\n        border-radius: 0.2rem !important;\r\n        // font-family: PingFang_Bold;\r\n        font-weight: 600;\r\n      }\r\n    }\r\n  }\r\n  .icon {\r\n    width: 38px;\r\n    height: 38px;\r\n    position: absolute;\r\n    right: 0.5rem;\r\n  }\r\n  .content-padded {\r\n    margin: 0;\r\n  }\r\n  .list .item-subtitle {\r\n    font-size: 14px;\r\n  }\r\n  .img_content {\r\n    height: 10rem;\r\n    width: 100%;\r\n    background: url(\"../../../../../static/img/shuidi.png\") no-repeat;\r\n    background-size: 100% 100%;\r\n    margin-left: 0;\r\n  }\r\n  .total_num {\r\n    // font-family: PingFang_Heavy;\r\n    font-weight: bolder;\r\n    font-size: 20px;\r\n  }\r\n  .content-block {\r\n    .col-100 {\r\n      text-align: center;\r\n    }\r\n    a {\r\n      font-size: 0.9rem;\r\n      height: 2rem;\r\n      line-height: 2rem;\r\n      width: 60%;\r\n      display: inline-block;\r\n    }\r\n  }\r\n  .list {\r\n    margin: 0;\r\n  }\r\n  // [data-v-594b8ba6]\r\n  .content-block a {\r\n    font-size: 0.9rem;\r\n    height: 2.7rem;\r\n    line-height: 2.7rem;\r\n    width: 92%;\r\n    display: inline-block;\r\n    border-radius: 4px;\r\n    background: #479eff;\r\n    // position: fixed;\r\n    // bottom: 2%;\r\n    // left: 4%;\r\n  }\r\n  .item-title-row {\r\n    // font-family: PingFang_Medium;\r\n    font-size: 15px;\r\n    // height: 2.1rem !important;\r\n    // width: 80%;\r\n    width: 95%;\r\n  }\r\n\r\n  .col-100 {\r\n    /*font-size: 14px;*/\r\n    /*\t\tcolor: red;*/\r\n    .user-card {\r\n      border-radius: 10px;\r\n      padding-top: 3px;\r\n      // font-family: PingFang_Light;\r\n      font-weight: 100;\r\n      // background: url('../../../../project/assets/img/sfcj-bg.png') no-repeat;\r\n      //  background-size:100%;\r\n      &:after {\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        content: \"\";\r\n      }\r\n      .card-header {\r\n        .img {\r\n          float: left;\r\n        }\r\n        a {\r\n          float: right;\r\n          color: #fff;\r\n          b {\r\n            font-size: 16px;\r\n            font-weight: normal;\r\n            text-decoration: underline;\r\n          }\r\n        }\r\n      }\r\n      .card-content {\r\n        width: 100%;\r\n        display: -webkit-box;\r\n        display: -ms-flexbox;\r\n        display: flex;\r\n        position: relative;\r\n        // padding-top: 10px;\r\n        .kr-ul {\r\n          margin-top: 6%;\r\n          width: 100%;\r\n\r\n          li {\r\n            color: #fff;\r\n            // padding: 10px 7px;\r\n            padding: 1.5% 1%;\r\n            font-weight: 300;\r\n\r\n            b {\r\n              font-weight: 300;\r\n            }\r\n            font-size: 14px;\r\n            a {\r\n              display: inline-block;\r\n              color: #3193f6;\r\n              float: right;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .money-select {\r\n      margin: 0.5rem;\r\n      &:after {\r\n        content: \"020\";\r\n        display: block;\r\n        height: 0;\r\n        clear: both;\r\n        visibility: hidden;\r\n      }\r\n      li {\r\n        float: left;\r\n        width: 27%;\r\n        height: 2rem;\r\n        line-height: 2rem;\r\n        text-align: center;\r\n        margin: 3%;\r\n        background: #e7e7e7;\r\n        border-radius: 6px;\r\n      }\r\n    }\r\n    p {\r\n      text-align: center;\r\n      margin: 0.5rem;\r\n    }\r\n    h3 {\r\n      padding: 0.5rem;\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/project/mywater/waterquery/pages/moreAccount.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"more-account\"},[_c('page-content',[_c('div',{staticClass:\"content-padded\"},[_c('headerTwo',{attrs:{\"showData\":_vm.showData,\"title\":_vm.title}}),_vm._v(\" \"),_c('div',{staticClass:\"row kr-buttom\",on:{\"touchmove\":function($event){_vm.touchmove($event)},\"scroll\":function($event){_vm.scroll($event)}}},[_c('div',{staticClass:\"col-100 kr-list\",attrs:{\"id\":\"kr-list\"}},[_c('list',_vm._l((_vm.needData),function(item,i){return _c('list-item',{key:item.code,attrs:{\"i\":i},nativeOn:{\"click\":function($event){_vm.goBill(item)}}},[_c('div',{staticClass:\"item-media\"}),_vm._v(\" \"),_c('div',{staticClass:\"item-content\"},[_c('div',{staticClass:\"item-title-row\"},[_c('div',{staticClass:\"item-title\"},[_c('span',[_vm._v(_vm._s(item.userName))]),_vm._v(\"\\n                      (\"),_c('span',[_vm._v(_vm._s(item.userNo))]),_vm._v(\")\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"item-title\"},[_c('span',[_vm._v(\"欠费金额\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"item-title-row\"},[_c('div',{staticClass:\"item-title\"},[_c('span',{staticStyle:{\"text-overflow\":\"ellipsis\"}},[_vm._v(_vm._s(item.userAddress))])]),_vm._v(\" \"),_c('div',{staticClass:\"item-title\"},[_c('span',{staticClass:\"total_num\",staticStyle:{\"font-size\":\"25px\"}},[_vm._v(_vm._s(item.arrears)+\"元\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"kr-checkbox\",on:{\"click\":function($event){_vm.takeChage(i,item)}}},[_c('input',{staticClass:\"checkbox\",attrs:{\"type\":\"checkbox\",\"name\":\"name\",\"value\":\"A\",\"id\":'checkbox'+i}})])])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"kr-div\"}),_vm._v(\" \"),(_vm.isShowBtn)?_c('div',{staticClass:\"row content-block\"},[_c('div',{staticClass:\"col-100\"},[_c('m-button',{attrs:{\"size\":\"large\"},nativeOn:{\"click\":function($event){_vm.pay($event)}}},[_vm._v(\"确认支付（￥\"+_vm._s(_vm.count)+\"）\")])],1)]):_vm._e(),_vm._v(\" \"),_c('van-dialog',{attrs:{\"title\":'确认支付金额￥'+_vm.count,\"show-cancel-button\":\"\"},on:{\"confirm\":function($event){_vm.comfirm()}},model:{value:(_vm.isShowPrice),callback:function ($$v) {_vm.isShowPrice=$$v},expression:\"isShowPrice\"}})],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e9a37eea\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/project/mywater/waterquery/pages/moreAccount.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".more-account[data-v-e9a37eea]{height:100%}.more-account .kr-buttom #kr-list .van-row[data-v-e9a37eea]{padding:1%;border-bottom:1px solid #888}.more-account .kr-buttom #kr-list .van-row .van-col[data-v-e9a37eea]{height:100%}.more-account .kr-buttom #kr-list .van-row .van-col .item-title-span[data-v-e9a37eea]{padding:3% 0 0;height:100%;width:100%}.more-account .kr-buttom #kr-list .van-row .van-col .item-title-span .kr-span[data-v-e9a37eea]{display:inline-block;height:100%;line-height:100%;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.more-account .kr-buttom #kr-list .van-row .van-col .item-title[data-v-e9a37eea]{font-weight:300}.more-account .kr-buttom #kr-list .van-row .kr-checkbox[data-v-e9a37eea]{padding:4% 0 0}.more-account .kr-buttom #kr-list .van-row .kr-checkbox input[type=checkbox]+label[data-v-e9a37eea]{display:block;width:30px;height:30px;border-radius:50%;cursor:pointer;border:1px solid red}.more-account .kr-buttom #kr-list .van-row .kr-checkbox input[type=checkbox]:checked+label[data-v-e9a37eea]:before{display:block;content:\\\"\\\\2714\\\";text-align:center;font-size:20px;color:red}.more-account .kr-buttom #kr-list .van-row .kr-checkbox input[type=checkbox][data-v-e9a37eea]{width:30px;height:30px}.more-account .page-content .content-padded[data-v-e9a37eea],.more-account .page-content[data-v-e9a37eea]{height:100%}.more-account .page-content .content-padded .kr-buttom[data-v-e9a37eea]{height:70%}.more-account .page-content .content-padded .kr-buttom .kr-list[data-v-e9a37eea]{height:85%;height:100%;overflow-y:auto;width:100%}.more-account .page-content .content-padded .kr-buttom .kr-list .item-content[data-v-e9a37eea]{margin-left:0;padding-right:0;width:88%}.more-account .page-content .content-padded .kr-buttom .kr-list .kr-checkbox[data-v-e9a37eea]{width:6%;padding:10% 0}.more-account .page-content .content-padded .kr-buttom .kr-list .kr-checkbox .checkbox[data-v-e9a37eea]{width:100%;height:100%;border-radius:50%;display:inline-block}.more-account .page-content .content-padded .kr-buttom .content-block[data-v-e9a37eea]{height:13%;padding:2% 0 0 4%}.more-account .pay_box[data-v-e9a37eea]{padding:1%;text-align:right;margin-top:142%}.more-account .pay_box a[data-v-e9a37eea]{display:inline-block;color:#1e1f6a;font-weight:bolder}.more-account .pay_box a .button[data-v-e9a37eea]{border-radius:.2rem!important;font-weight:600}.more-account .icon[data-v-e9a37eea]{width:38px;height:38px;position:absolute;right:.5rem}.more-account .content-padded[data-v-e9a37eea]{margin:0}.more-account .list .item-subtitle[data-v-e9a37eea]{font-size:14px}.more-account .img_content[data-v-e9a37eea]{height:10rem;width:100%;background:url(\" + require(\"../../../../../static/img/shuidi.png\") + \") no-repeat;background-size:100% 100%;margin-left:0}.more-account .total_num[data-v-e9a37eea]{font-weight:bolder;font-size:20px}.more-account .content-block .col-100[data-v-e9a37eea]{text-align:center}.more-account .content-block a[data-v-e9a37eea]{height:2rem;line-height:2rem;width:60%}.more-account .list[data-v-e9a37eea]{margin:0}.more-account .content-block a[data-v-e9a37eea]{font-size:.9rem;height:2.7rem;line-height:2.7rem;width:92%;display:inline-block;border-radius:4px;background:#479eff}.more-account .item-title-row[data-v-e9a37eea]{font-size:15px;width:95%}.more-account .col-100 .user-card[data-v-e9a37eea]{border-radius:10px;padding-top:3px;font-weight:100}.more-account .col-100 .user-card[data-v-e9a37eea]:after{display:block;width:100%;height:100%;content:\\\"\\\"}.more-account .col-100 .user-card .card-header .img[data-v-e9a37eea]{float:left}.more-account .col-100 .user-card .card-header a[data-v-e9a37eea]{float:right;color:#fff}.more-account .col-100 .user-card .card-header a b[data-v-e9a37eea]{font-size:16px;font-weight:400;text-decoration:underline}.more-account .col-100 .user-card .card-content[data-v-e9a37eea]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.more-account .col-100 .user-card .card-content .kr-ul[data-v-e9a37eea]{margin-top:6%;width:100%}.more-account .col-100 .user-card .card-content .kr-ul li[data-v-e9a37eea]{color:#fff;padding:1.5% 1%;font-weight:300;font-size:14px}.more-account .col-100 .user-card .card-content .kr-ul li b[data-v-e9a37eea]{font-weight:300}.more-account .col-100 .user-card .card-content .kr-ul li a[data-v-e9a37eea]{display:inline-block;color:#3193f6;float:right}.more-account .col-100 .money-select[data-v-e9a37eea]{margin:.5rem}.more-account .col-100 .money-select[data-v-e9a37eea]:after{content:\\\"020\\\";display:block;height:0;clear:both;visibility:hidden}.more-account .col-100 .money-select li[data-v-e9a37eea]{float:left;width:27%;height:2rem;line-height:2rem;text-align:center;margin:3%;background:#e7e7e7;border-radius:6px}.more-account .col-100 p[data-v-e9a37eea]{text-align:center;margin:.5rem}.more-account .col-100 h3[data-v-e9a37eea]{padding:.5rem}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-e9a37eea\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/project/mywater/waterquery/pages/moreAccount.vue\n// module id = TZ1l\n// module chunks = 1 34","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!../../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e9a37eea\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./moreAccount.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/vue-loader/node_modules/vue-style-loader/lib/addStylesClient.js\")(\"6e53d27a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-e9a37eea\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/project/mywater/waterquery/pages/moreAccount.vue\n// module id = b+wz\n// module chunks = 1 34"],"sourceRoot":""}